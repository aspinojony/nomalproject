<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIåŠ©æ‰‹ä¿®å¤æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            line-height: 1.6;
        }
        .test-info {
            background: #f0f9ff;
            border: 1px solid #bae6fd;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .test-buttons {
            display: flex;
            gap: 10px;
            margin: 20px 0;
        }
        .test-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            background: #3b82f6;
            color: white;
            cursor: pointer;
            transition: background 0.2s;
        }
        .test-btn:hover {
            background: #2563eb;
        }
        #console-output {
            background: #1f2937;
            color: #f9fafb;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            max-height: 300px;
            overflow-y: auto;
            white-space: pre-wrap;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="test-info">
        <h1>ğŸ”§ AIåŠ©æ‰‹ä¿®å¤æµ‹è¯•é¡µé¢</h1>
        <p>è¿™ä¸ªé¡µé¢ç”¨äºæµ‹è¯•AIåŠ©æ‰‹çš„ä¿®å¤æƒ…å†µï¼Œæ£€æŸ¥æ‰€æœ‰åŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚</p>
        
        <h3>æµ‹è¯•é¡¹ç›®ï¼š</h3>
        <ul>
            <li>âœ… DOMå…ƒç´ æ­£ç¡®åŠ è½½</li>
            <li>âœ… äº‹ä»¶ç»‘å®šæˆåŠŸ</li>
            <li>âœ… æ¨¡å¼åˆ‡æ¢åŠŸèƒ½</li>
            <li>âœ… æ‹–æ‹½ç§»åŠ¨åŠŸèƒ½</li>
            <li>âœ… çª—å£ç¼©æ”¾åŠŸèƒ½</li>
            <li>âœ… éé˜»å¡æ˜¾ç¤ºæ¨¡å¼</li>
        </ul>
    </div>

    <div class="test-buttons">
        <button class="test-btn" onclick="openAI()">æ‰“å¼€AIåŠ©æ‰‹</button>
        <button class="test-btn" onclick="testPageInteraction()">æµ‹è¯•é¡µé¢äº¤äº’</button>
        <button class="test-btn" onclick="clearConsole()">æ¸…ç©ºæ§åˆ¶å°</button>
    </div>

    <div>
        <h3>å®æ—¶æ§åˆ¶å°è¾“å‡ºï¼š</h3>
        <div id="console-output">ç­‰å¾…æµ‹è¯•...</div>
    </div>

    <script>
        // æ•è·æ§åˆ¶å°è¾“å‡º
        const consoleOutput = document.getElementById('console-output');
        const originalLog = console.log;
        const originalError = console.error;
        const originalWarn = console.warn;

        function addToConsole(type, ...args) {
            const timestamp = new Date().toLocaleTimeString();
            const message = args.map(arg => 
                typeof arg === 'object' ? JSON.stringify(arg, null, 2) : String(arg)
            ).join(' ');
            
            const prefix = {
                'log': 'ğŸ’¬',
                'error': 'âŒ',
                'warn': 'âš ï¸'
            }[type];
            
            consoleOutput.textContent += `[${timestamp}] ${prefix} ${message}\n`;
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        }

        console.log = function(...args) {
            originalLog.apply(console, args);
            addToConsole('log', ...args);
        };

        console.error = function(...args) {
            originalError.apply(console, args);
            addToConsole('error', ...args);
        };

        console.warn = function(...args) {
            originalWarn.apply(console, args);
            addToConsole('warn', ...args);
        };

        function openAI() {
            console.log('ğŸš€ å°è¯•æ‰“å¼€AIåŠ©æ‰‹...');
            if (window.aiAssistant && typeof window.aiAssistant.show === 'function') {
                window.aiAssistant.show();
                console.log('âœ… AIåŠ©æ‰‹æ‰“å¼€æˆåŠŸ');
            } else {
                console.error('âŒ AIåŠ©æ‰‹æœªæ­£ç¡®åˆå§‹åŒ–');
                console.log('ğŸ“Š å½“å‰çŠ¶æ€:', {
                    aiAssistant: !!window.aiAssistant,
                    showMethod: !!window.aiAssistant?.show
                });
            }
        }

        function testPageInteraction() {
            const btn = document.createElement('button');
            btn.textContent = 'æµ‹è¯•æŒ‰é’® - ç‚¹å‡»æˆ‘';
            btn.style.cssText = 'position: fixed; top: 100px; left: 100px; padding: 10px; background: #10b981; color: white; border: none; border-radius: 4px; cursor: pointer; z-index: 1000;';
            btn.onclick = function() {
                alert('é¡µé¢äº¤äº’æ­£å¸¸ï¼è¿™è¯´æ˜AIåŠ©æ‰‹æ²¡æœ‰é˜»å¡å…¶ä»–å…ƒç´ çš„äº¤äº’ã€‚');
                btn.remove();
            };
            document.body.appendChild(btn);
            console.log('âœ… æµ‹è¯•æŒ‰é’®å·²æ·»åŠ åˆ°é¡µé¢ï¼Œè¯·æ£€æŸ¥æ˜¯å¦èƒ½æ­£å¸¸ç‚¹å‡»');
        }

        function clearConsole() {
            consoleOutput.textContent = '';
        }

        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–æ£€æŸ¥
        window.addEventListener('load', function() {
            console.log('ğŸ” å¼€å§‹AIåŠ©æ‰‹çŠ¶æ€æ£€æŸ¥...');
            
            setTimeout(() => {
                console.log('ğŸ“Š AIåŠ©æ‰‹ç»„ä»¶çŠ¶æ€:', {
                    aiAssistant: !!window.aiAssistant,
                    aiAPIManager: !!window.aiAPIManager,
                    showMethod: !!window.aiAssistant?.show,
                    hideMethod: !!window.aiAssistant?.hide,
                    toggleModeMethod: !!window.aiAssistant?.toggleMode
                });

                if (window.aiAssistant) {
                    console.log('âœ… AIåŠ©æ‰‹å·²æ­£ç¡®åˆå§‹åŒ–');
                } else {
                    console.error('âŒ AIåŠ©æ‰‹åˆå§‹åŒ–å¤±è´¥');
                }
            }, 2000);
        });
    </script>

    <!-- åŠ è½½AIåŠ©æ‰‹ -->
    <script src="assets/js/ai-assistant-loader.js"></script>
</body>
</html>