<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¢˜åº“è¿æ¥æµ‹è¯•</title>
    <style>
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 20px;
            line-height: 1.6;
        }
        .test-result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 4px;
        }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .info { background: #d1ecf1; color: #0c5460; }
    </style>
</head>
<body>
    <h1>é¢˜åº“è¿æ¥æµ‹è¯•</h1>
    <div id="results"></div>
    
    <div style="margin-top: 20px;">
        <h3>æ“ä½œæ­¥éª¤ï¼š</h3>
        <ol>
            <li>æ‰“å¼€ <a href="question-manager.html" target="_blank">é¢˜ç›®ç®¡ç†å·¥å…·</a></li>
            <li>å¯¼å…¥ä¸€äº›é¢˜ç›®æ•°æ®</li>
            <li>åˆ·æ–°æœ¬é¡µé¢æŸ¥çœ‹è¿æ¥çŠ¶æ€</li>
            <li>æ‰“å¼€ <a href="practice.html" target="_blank">çœŸé¢˜ç»ƒä¹ é¡µé¢</a> éªŒè¯é¢˜ç›®æ˜¯å¦æ˜¾ç¤º</li>
        </ol>
    </div>

    <script src="assets/js/question-bank-manager.js"></script>
    <script>
        function addResult(message, type = 'info') {
            const div = document.createElement('div');
            div.className = `test-result ${type}`;
            div.innerHTML = message;
            document.getElementById('results').appendChild(div);
        }

        function runTests() {
            addResult('ğŸ” å¼€å§‹æ£€æµ‹é¢˜åº“è¿æ¥...', 'info');
            
            // æ£€æŸ¥é¢˜åº“ç®¡ç†å™¨æ˜¯å¦åŠ è½½
            if (typeof window.questionBank === 'undefined') {
                addResult('âŒ é¢˜åº“ç®¡ç†å™¨æœªåŠ è½½', 'error');
                return;
            }
            
            addResult('âœ… é¢˜åº“ç®¡ç†å™¨å·²åŠ è½½', 'success');
            
            // æ£€æŸ¥é¢˜ç›®æ•°é‡
            const questionCount = window.questionBank.questions.length;
            addResult(`ğŸ“Š å½“å‰é¢˜åº“åŒ…å« ${questionCount} é“é¢˜ç›®`, questionCount > 0 ? 'success' : 'info');
            
            if (questionCount > 0) {
                // æ˜¾ç¤ºé¢˜ç›®ç»Ÿè®¡
                const stats = window.questionBank.getStatistics();
                addResult(`ğŸ“š ç§‘ç›®åˆ†å¸ƒï¼š${Object.keys(stats.by_subject).length} ä¸ªç§‘ç›®`, 'info');
                
                let subjectInfo = 'ç§‘ç›®è¯¦æƒ…ï¼š<br>';
                Object.entries(stats.by_subject).forEach(([subject, count]) => {
                    subjectInfo += `&nbsp;&nbsp;â€¢ ${subject}: ${count} é¢˜<br>`;
                });
                addResult(subjectInfo, 'info');
                
                addResult('âœ… é¢˜åº“æ•°æ®è¿æ¥æ­£å¸¸ï¼Œpractice.html åº”è¯¥èƒ½å¤Ÿæ˜¾ç¤ºè¿™äº›é¢˜ç›®', 'success');
            } else {
                addResult('â„¹ï¸ é¢˜åº“ä¸ºç©ºï¼Œè¯·å…ˆåœ¨é¢˜ç›®ç®¡ç†å·¥å…·ä¸­æ·»åŠ é¢˜ç›®', 'info');
            }
            
            // æµ‹è¯•æœç´¢åŠŸèƒ½
            const searchResults = window.questionBank.searchQuestions('');
            addResult(`ğŸ” æœç´¢åŠŸèƒ½æµ‹è¯•ï¼šæ‰¾åˆ° ${searchResults.length} é“é¢˜ç›®`, 'info');
        }

        // é¡µé¢åŠ è½½åè¿è¡Œæµ‹è¯•
        setTimeout(runTests, 500);
        
        // æ¯10ç§’è‡ªåŠ¨åˆ·æ–°ä¸€æ¬¡
        setInterval(() => {
            document.getElementById('results').innerHTML = '';
            runTests();
        }, 10000);
    </script>
</body>
</html>