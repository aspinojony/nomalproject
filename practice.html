<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÁúüÈ¢òÁªÉ‰π† - ËÆ°ÁÆóÊú∫ËÄÉÁ†îÂ≠¶‰π†Âπ≥Âè∞</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Ê∑ªÂä†CryptoJSÂ∫ìÊîØÊåÅ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <link href="assets/css/common.css" rel="stylesheet">
    <!-- AIÂä©ÊâãÂä†ËΩΩÂô® -->
    <script src="assets/js/ai-assistant-loader.js"></script>
    <!-- È¢òÂ∫ìÁÆ°ÁêÜÂô® -->
    <script src="assets/js/question-bank-manager.js"></script>
    <!-- Â≠¶‰π†ÁªüËÆ°ÁÆ°ÁêÜÂô® -->
    <script src="assets/js/stats-manager.js"></script>
    <!-- ËµÑÊ∫êÂä†ËΩΩÂô®ÂíåÊï∞ÊçÆÊñá‰ª∂ -->
    <script src="assets/js/course-data.js"></script>
    <script src="assets/js/fallback-data.js"></script>
    <script src="assets/js/resource-loader.js"></script>
    <style>
        .hero-bg {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }
        .card-hover:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            transition: all 0.3s ease;
        }
        .question-card {
            background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
        }
        .option-button {
            transition: all 0.2s ease;
        }
        .option-button:hover {
            transform: scale(1.02);
        }
        .option-selected {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
        }
        .option-correct {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
        }
        .option-wrong {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
        }
        .timer {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        }
    </style>
</head>
<body class="bg-gray-50" x-data="practiceApp()">
    <!-- ÂØºËà™Ê†è -->
    <nav class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center space-x-2">
                    <a href="index.html" class="flex items-center space-x-2">
                        <i class="fas fa-graduation-cap text-2xl text-indigo-600"></i>
                        <h1 class="text-xl font-bold text-gray-800">ËÆ°ÁÆóÊú∫ËÄÉÁ†îÂπ≥Âè∞</h1>
                    </a>
                </div>
                <div class="hidden md:flex space-x-6">
                    <a href="index.html" class="text-gray-600 hover:text-indigo-600 transition">È¶ñÈ°µ</a>
                    <a href="subjects.html" class="text-gray-600 hover:text-indigo-600 transition">ËØæÁ®ãÂØºËà™</a>
                    <a href="#" class="text-indigo-600 font-semibold">ÁúüÈ¢òÁªÉ‰π†</a>
                    <a href="question-manager.html" class="text-gray-600 hover:text-indigo-600 transition">È¢òÁõÆÁÆ°ÁêÜ</a>
                    <a href="#" @click="showHistoryView = true" class="text-gray-600 hover:text-indigo-600 transition">ÁªÉ‰π†ËÆ∞ÂΩï</a>
                    <a href="resources.html" class="text-gray-600 hover:text-indigo-600 transition">Â≠¶‰π†ËµÑÊ∫ê</a>
                </div>
                <div class="flex items-center space-x-4">
                    <button @click="refreshQuestions()" class="text-gray-600 hover:text-indigo-600 transition" title="Âà∑Êñ∞È¢òÁõÆÊï∞ÊçÆ">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                    <button @click="showStatsModal = true" class="text-gray-600 hover:text-indigo-600 transition" title="ÁªüËÆ°ËØ¶ÊÉÖ">
                        <i class="fas fa-chart-bar"></i>
                    </button>
                    <div class="hidden md:block text-sm text-gray-600">
                        ‰ªäÊó•Â∑≤ÁªÉ: <span class="text-indigo-600 font-semibold" x-text="dailyCompleted"></span> È¢ò
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Èù¢ÂåÖÂ±ëÂØºËà™ -->
    <div class="bg-white border-b" x-show="!currentQuestion">
        <div class="max-w-7xl mx-auto px-4 py-3">
            <div class="flex items-center space-x-2 text-sm">
                <a href="index.html" class="text-indigo-600 hover:text-indigo-800">È¶ñÈ°µ</a>
                <i class="fas fa-chevron-right text-gray-400"></i>
                <span class="text-gray-600">ÁúüÈ¢òÁªÉ‰π†</span>
            </div>
        </div>
    </div>

    <!-- Á≠îÈ¢òÁïåÈù¢ -->
    <div x-show="currentQuestion" class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50">
        <!-- Á≠îÈ¢òÂ§¥ÈÉ® -->
        <div class="bg-white shadow-sm border-b sticky top-16 z-40">
            <div class="max-w-4xl mx-auto px-4 py-4">
                <div class="flex justify-between items-center">
                    <div class="flex items-center space-x-4">
                        <button @click="exitPractice()" class="flex items-center space-x-2 text-gray-600 hover:text-gray-800">
                            <i class="fas fa-arrow-left"></i>
                            <span>ÈÄÄÂá∫ÁªÉ‰π†</span>
                        </button>
                        <div class="text-sm text-gray-600">
                            <span x-text="currentQuestionIndex + 1"></span> / <span x-text="selectedQuestions.length"></span>
                        </div>
                    </div>
                    <div class="flex items-center space-x-4">
                        <!-- ËÆ°Êó∂Âô® -->
                        <div class="timer text-white px-4 py-2 rounded-full text-sm font-medium">
                            <i class="fas fa-clock mr-2"></i>
                            <span x-text="formatTime(timeRemaining)"></span>
                        </div>
                        <!-- ËøõÂ∫¶Êù° -->
                        <div class="w-32 bg-gray-200 rounded-full h-2">
                            <div class="bg-indigo-500 h-2 rounded-full transition-all duration-300" 
                                 :style="`width: ${((currentQuestionIndex + 1) / selectedQuestions.length) * 100}%`"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Á≠îÈ¢òÂå∫Âüü -->
        <div class="max-w-4xl mx-auto px-4 py-8">
            <div class="question-card rounded-xl shadow-lg p-8">
                <!-- È¢òÁõÆ‰ø°ÊÅØ -->
                <div class="flex justify-between items-start mb-6">
                    <div class="flex items-center space-x-3">
                        <span class="bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full text-sm font-medium"
                              x-text="currentQuestion.subject"></span>
                        <span class="bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-sm"
                              x-text="currentQuestion.year + 'Âπ¥ÁúüÈ¢ò'"></span>
                        <span class="bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm"
                              x-text="currentQuestion.difficulty"></span>
                    </div>
                    <div class="flex items-center space-x-3">
                        <button @click="toggleFavorite(currentQuestion)"
                                class="p-2 rounded-lg hover:bg-gray-100 transition"
                                :class="isFavorite(currentQuestion.id) ? 'text-yellow-500' : 'text-gray-400'">
                            <i class="fas fa-star text-lg"></i>
                        </button>
                        <div class="text-sm text-gray-500">
                            ÂàÜÂÄº: <span class="font-medium" x-text="currentQuestion.points"></span>ÂàÜ
                        </div>
                    </div>
                </div>

                <!-- È¢òÁõÆÂÜÖÂÆπ -->
                <div class="mb-8">
                    <h3 class="text-lg font-medium text-gray-800 leading-relaxed" x-html="currentQuestion.question"></h3>
                </div>

                <!-- ÈÄâÈ°π -->
                <div class="space-y-3 mb-8">
                    <template x-for="(option, index) in currentQuestion.options" :key="index">
                        <button class="option-button w-full text-left p-4 border-2 rounded-lg"
                                :class="getOptionClass(index)"
                                @click="selectOption(index)"
                                :disabled="showAnswer">
                            <div class="flex items-center space-x-3">
                                <div class="w-6 h-6 rounded-full border-2 flex items-center justify-center text-sm font-medium"
                                     :class="getOptionCircleClass(index)">
                                    <span x-text="String.fromCharCode(65 + index)"></span>
                                </div>
                                <span x-text="option"></span>
                            </div>
                        </button>
                    </template>
                </div>

                <!-- Á≠îÊ°àËß£Êûê -->
                <div x-show="showAnswer" class="bg-gray-50 rounded-lg p-6 mb-6">
                    <div class="flex items-center space-x-2 mb-3">
                        <i class="fas fa-lightbulb text-yellow-500"></i>
                        <h4 class="font-medium text-gray-800">Á≠îÊ°àËß£Êûê</h4>
                    </div>
                    <div class="mb-3">
                        <span class="text-sm text-gray-600">Ê≠£Á°ÆÁ≠îÊ°à: </span>
                        <span class="font-medium text-green-600" x-text="String.fromCharCode(65 + currentQuestion.correctAnswer)"></span>
                    </div>
                    <p class="text-gray-700 leading-relaxed" x-text="currentQuestion.explanation"></p>
                </div>

                <!-- Êìç‰ΩúÊåâÈíÆ -->
                <div class="flex justify-between items-center">
                    <button x-show="currentQuestionIndex > 0" 
                            @click="previousQuestion()"
                            class="flex items-center space-x-2 px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition">
                        <i class="fas fa-chevron-left"></i>
                        <span>‰∏ä‰∏ÄÈ¢ò</span>
                    </button>
                    <div></div>
                    
                    <div class="flex space-x-3">
                        <button x-show="!showAnswer && selectedAnswer !== null" 
                                @click="checkAnswer()"
                                class="bg-indigo-500 text-white px-8 py-3 rounded-lg hover:bg-indigo-600 transition font-medium">
                            Êèê‰∫§Á≠îÊ°à
                        </button>
                        
                        <button x-show="showAnswer && currentQuestionIndex < selectedQuestions.length - 1" 
                                @click="nextQuestion()"
                                class="flex items-center space-x-2 bg-green-500 text-white px-6 py-3 rounded-lg hover:bg-green-600 transition">
                            <span>‰∏ã‰∏ÄÈ¢ò</span>
                            <i class="fas fa-chevron-right"></i>
                        </button>
                        
                        <button x-show="showAnswer && currentQuestionIndex === selectedQuestions.length - 1" 
                                @click="finishPractice()"
                                class="bg-purple-500 text-white px-8 py-3 rounded-lg hover:bg-purple-600 transition font-medium">
                            ÂÆåÊàêÁªÉ‰π†
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ÁªÉ‰π†ÈÄâÊã©ÁïåÈù¢ -->
    <div x-show="!currentQuestion && !showHistoryView">

    <!-- ÁªÉ‰π†ÂéÜÂè≤ÁïåÈù¢ -->
    <div x-show="showHistoryView" class="min-h-screen bg-gray-50">
        <!-- ËøîÂõûÊåâÈíÆ -->
        <div class="bg-white shadow-sm border-b">
            <div class="max-w-7xl mx-auto px-4 py-4">
                <button @click="showHistoryView = false" class="flex items-center space-x-2 text-gray-600 hover:text-gray-800">
                    <i class="fas fa-arrow-left"></i>
                    <span>ËøîÂõûÁªÉ‰π†</span>
                </button>
            </div>
        </div>

        <!-- ÁªÉ‰π†ÂéÜÂè≤ÂÜÖÂÆπ -->
        <div class="max-w-7xl mx-auto px-4 py-8">
            <div class="mb-8">
                <h2 class="text-2xl font-bold text-gray-800 mb-2">üìä ÁªÉ‰π†ÂéÜÂè≤ËÆ∞ÂΩï</h2>
                <p class="text-gray-600">Êü•ÁúãÊÇ®ÁöÑÁªÉ‰π†ÁªüËÆ°ÂíåÂéÜÂè≤ËÆ∞ÂΩï</p>
            </div>

            <!-- Â≠¶‰π†ËÆ°ÂàíÂíåÁõÆÊ†áËÆæÁΩÆ -->
            <div class="grid md:grid-cols-2 gap-6 mb-8">
                <!-- Â≠¶‰π†ËÆ°Âàí -->
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-semibold text-gray-800">üìÖ Â≠¶‰π†ËÆ°Âàí</h3>
                        <button @click="showPlanForm = !showPlanForm" 
                                class="text-indigo-600 hover:text-indigo-800 text-sm">
                            <i class="fas fa-plus mr-1"></i>Êñ∞Âª∫ËÆ°Âàí
                        </button>
                    </div>
                    
                    <!-- ËÆ°ÂàíË°®Âçï -->
                    <div x-show="showPlanForm" class="mb-4 p-4 bg-gray-50 rounded">
                        <div class="space-y-3">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">ÁõÆÊ†áËÄÉËØïÊó•Êúü</label>
                                <input type="date" x-model="newPlan.targetDate" 
                                       class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">ÊØèÊó•Â≠¶‰π†Êó∂Èïø(Â∞èÊó∂)</label>
                                <input type="number" x-model="newPlan.dailyHours" min="1" max="12"
                                       class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500">
                            </div>
                            <div class="flex space-x-2">
                                <button @click="createStudyPlan()" 
                                        class="bg-indigo-500 text-white px-4 py-2 rounded hover:bg-indigo-600 transition">
                                    ÂàõÂª∫ËÆ°Âàí
                                </button>
                                <button @click="showPlanForm = false" 
                                        class="bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400 transition">
                                    ÂèñÊ∂à
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ÂΩìÂâçËÆ°Âàí -->
                    <div x-show="studyPlans.length > 0">
                        <template x-for="plan in studyPlans.slice(0, 1)" :key="plan.id">
                            <div class="border rounded p-3">
                                <div class="flex justify-between items-center mb-2">
                                    <span class="font-medium text-gray-800">ÁõÆÊ†áÊó•Êúü</span>
                                    <span class="text-gray-600" x-text="formatDate(plan.targetDate)"></span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="font-medium text-gray-800">ÊØèÊó•Êó∂Èïø</span>
                                    <span class="text-gray-600" x-text="plan.dailyHours + 'Â∞èÊó∂'"></span>
                                </div>
                            </div>
                        </template>
                    </div>
                    
                    <div x-show="studyPlans.length === 0" class="text-center text-gray-500 py-8">
                        ÊöÇÊó†Â≠¶‰π†ËÆ°ÂàíÔºåÁÇπÂáª‰∏äÊñπÊåâÈíÆÂàõÂª∫
                    </div>
                </div>
                
                <!-- Â≠¶‰π†ÁõÆÊ†á -->
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-semibold text-gray-800">üéØ Â≠¶‰π†ÁõÆÊ†á</h3>
                        <button @click="showGoalForm = !showGoalForm" 
                                class="text-indigo-600 hover:text-indigo-800 text-sm">
                            <i class="fas fa-plus mr-1"></i>Êñ∞Âª∫ÁõÆÊ†á
                        </button>
                    </div>
                    
                    <!-- ÁõÆÊ†áË°®Âçï -->
                    <div x-show="showGoalForm" class="mb-4 p-4 bg-gray-50 rounded">
                        <div class="space-y-3">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">ÁõÆÊ†áÁ±ªÂûã</label>
                                <select x-model="newGoal.goalType" 
                                        class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500">
                                    <option value="">ÈÄâÊã©ÁõÆÊ†áÁ±ªÂûã</option>
                                    <option value="daily_questions">ÊØèÊó•Á≠îÈ¢òÊï∞</option>
                                    <option value="weekly_accuracy">Âë®Ê≠£Á°ÆÁéá</option>
                                    <option value="monthly_sessions">ÊúàÁªÉ‰π†Ê¨°Êï∞</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">ÁõÆÊ†áÂÄº</label>
                                <input type="number" x-model="newGoal.targetValue" min="1"
                                       class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Êà™Ê≠¢Êó•Êúü</label>
                                <input type="date" x-model="newGoal.deadline" 
                                       class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500">
                            </div>
                            <div class="flex space-x-2">
                                <button @click="createStudyGoal()" 
                                        class="bg-indigo-500 text-white px-4 py-2 rounded hover:bg-indigo-600 transition">
                                    ÂàõÂª∫ÁõÆÊ†á
                                </button>
                                <button @click="showGoalForm = false" 
                                        class="bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400 transition">
                                    ÂèñÊ∂à
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ÁõÆÊ†áÂàóË°® -->
                    <div class="space-y-3">
                        <template x-for="goal in studyGoals.slice(0, 3)" :key="goal.id">
                            <div class="border rounded p-3">
                                <div class="flex justify-between items-center mb-2">
                                    <span class="font-medium text-gray-800" x-text="getGoalTypeName(goal.goalType)"></span>
                                    <span class="text-sm" 
                                          :class="goal.isCompleted ? 'text-green-600' : 'text-gray-600'"
                                          x-text="goal.isCompleted ? 'Â∑≤ÂÆåÊàê' : 'ËøõË°å‰∏≠'"></span>
                                </div>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-sm text-gray-600">
                                        <span x-text="goal.currentValue"></span> / <span x-text="goal.targetValue"></span>
                                    </span>
                                    <span class="text-sm text-gray-600" x-text="Math.round(goal.progress) + '%'"></span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-indigo-500 h-2 rounded-full transition-all"
                                         :style="`width: ${Math.min(goal.progress, 100)}%`"></div>
                                </div>
                            </div>
                        </template>
                    </div>
                    
                    <div x-show="studyGoals.length === 0" class="text-center text-gray-500 py-8">
                        ÊöÇÊó†Â≠¶‰π†ÁõÆÊ†áÔºåÁÇπÂáª‰∏äÊñπÊåâÈíÆÂàõÂª∫
                    </div>
                </div>
            </div>
                <div class="bg-white rounded-lg shadow p-6 text-center">
                    <div class="text-3xl font-bold text-indigo-600 mb-2" x-text="totalCompleted"></div>
                    <div class="text-sm text-gray-600">ÊÄªÂÆåÊàêÈ¢òÊï∞</div>
                </div>
                <div class="bg-white rounded-lg shadow p-6 text-center">
                    <div class="text-3xl font-bold text-green-600 mb-2" x-text="accuracyRate + '%'"></div>
                    <div class="text-sm text-gray-600">ÊÄªÊ≠£Á°ÆÁéá</div>
                </div>
                <div class="bg-white rounded-lg shadow p-6 text-center">
                    <div class="text-3xl font-bold text-purple-600 mb-2" x-text="practiceHistory.length"></div>
                    <div class="text-sm text-gray-600">ÁªÉ‰π†Ê¨°Êï∞</div>
                </div>
                <div class="bg-white rounded-lg shadow p-6 text-center">
                    <div class="text-3xl font-bold text-orange-600 mb-2" x-text="dailyCompleted"></div>
                    <div class="text-sm text-gray-600">‰ªäÊó•ÂÆåÊàê</div>
                </div>
            </div>

            <!-- ÂéÜÂè≤ËÆ∞ÂΩïÂàóË°® -->
            <div class="bg-white rounded-lg shadow">
                <div class="p-6 border-b">
                    <div class="flex justify-between items-center">
                        <h3 class="text-lg font-semibold text-gray-800">ÁªÉ‰π†ËÆ∞ÂΩï</h3>
                        <div class="flex items-center space-x-4">
                            <!-- Á≠õÈÄâÂô® -->
                            <select x-model="historyFilter" @change="filterHistory()" 
                                    class="px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500">
                                <option value="">ÂÖ®ÈÉ®Á±ªÂûã</option>
                                <option value="mixed">ÈöèÊú∫ÁªÉ‰π†</option>
                                <option value="subject">ÁßëÁõÆÁªÉ‰π†</option>
                                <option value="year">Âπ¥‰ªΩÁªÉ‰π†</option>
                                <option value="wrong">ÈîôÈ¢òÈáçÂÅö</option>
                                <option value="favorite">Êî∂ËóèÈ¢òÁõÆ</option>
                            </select>
                            <select x-model="difficultyFilter" @change="filterHistory()" 
                                    class="px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500">
                                <option value="">ÂÖ®ÈÉ®ÈöæÂ∫¶</option>
                                <option value="high">È´òÊ≠£Á°ÆÁéá(‚â•80%)</option>
                                <option value="medium">‰∏≠Á≠âÊ≠£Á°ÆÁéá(60-79%)</option>
                                <option value="low">‰ΩéÊ≠£Á°ÆÁéá(<60%)</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="divide-y divide-gray-200">
                    <template x-for="record in filteredHistory" :key="record.id">
                        <div class="p-6 hover:bg-gray-50 transition">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-4">
                                    <div class="w-12 h-12 rounded-lg flex items-center justify-center"
                                         :class="record.accuracyRate >= 80 ? 'bg-green-100 text-green-600' : 
                                                record.accuracyRate >= 60 ? 'bg-yellow-100 text-yellow-600' : 'bg-red-100 text-red-600'">
                                        <i class="fas fa-chart-line text-lg"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-medium text-gray-800" x-text="record.sessionName"></h4>
                                        <div class="flex items-center space-x-4 text-sm text-gray-600 mt-1">
                                            <span x-text="record.totalQuestions + 'È¢ò'"></span>
                                            <span x-text="'Ê≠£Á°ÆÁéá ' + record.accuracyRate + '%'"></span>
                                            <span x-text="formatTime(record.timeSpent || 0)"></span>
                                        </div>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="text-sm text-gray-500" x-text="formatDate(record.startedAt)"></div>
                                    <div class="flex items-center space-x-2 mt-2">
                                        <div class="flex items-center space-x-1">
                                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                            <span class="text-xs text-gray-600" x-text="record.correctCount"></span>
                                        </div>
                                        <div class="flex items-center space-x-1">
                                            <div class="w-2 h-2 bg-red-500 rounded-full"></div>
                                            <span class="text-xs text-gray-600" x-text="record.wrongCount || (record.totalQuestions - record.correctCount)"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </template>
                    
                    <!-- Á©∫Áä∂ÊÄÅ -->
                    <div x-show="filteredHistory.length === 0" class="p-12 text-center">
                        <div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-history text-gray-400 text-xl"></i>
                        </div>
                        <h3 class="text-lg font-medium text-gray-800 mb-2">ÊöÇÊó†ÁªÉ‰π†ËÆ∞ÂΩï</h3>
                        <p class="text-gray-600 mb-4">ÂºÄÂßãÊÇ®ÁöÑÁ¨¨‰∏ÄÊ¨°ÁªÉ‰π†ÂêßÔºÅ</p>
                        <button @click="showHistoryView = false" 
                                class="bg-indigo-500 text-white px-6 py-2 rounded-lg hover:bg-indigo-600 transition">
                            ÂºÄÂßãÁªÉ‰π†
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
        <!-- HeroÂå∫Âüü -->
        <section class="hero-bg text-white py-16">
            <div class="max-w-7xl mx-auto px-4 text-center">
                <h2 class="text-3xl md:text-4xl font-bold mb-4">üìã ÂéÜÂπ¥ÁúüÈ¢òÁªÉ‰π†</h2>
                <p class="text-lg opacity-90 mb-8">1280+ ÈÅìÁúüÈ¢òÔºå10Âπ¥ÂÆåÊï¥Ë¶ÜÁõñÔºåÊô∫ËÉΩËØÑÊµãÁ≥ªÁªü</p>
                <div class="flex justify-center items-center space-x-8">
                    <div class="text-center">
                        <div class="text-2xl font-bold" x-text="sampleQuestions.length + '+'"></div>
                        <div class="text-sm opacity-75">È¢òÁõÆÊÄªÊï∞</div>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl font-bold" x-text="totalCompleted"></div>
                        <div class="text-sm opacity-75">Â∑≤ÂÆåÊàê</div>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl font-bold" x-text="accuracyRate + '%'"></div>
                        <div class="text-sm opacity-75">Ê≠£Á°ÆÁéá</div>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl font-bold" x-text="dailyCompleted"></div>
                        <div class="text-sm opacity-75">‰ªäÊó•ÂÆåÊàê</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Âø´ÈÄüÁªÉ‰π†Âå∫Âüü -->
        <section class="py-16">
            <div class="max-w-7xl mx-auto px-4">
                <h3 class="text-2xl font-bold text-center mb-8 text-gray-800">‚ö° Âø´ÈÄüÂºÄÂßã</h3>
                
                <!-- ÊêúÁ¥¢Á≠õÈÄâÂ∑•ÂÖ∑Ê†è -->
                <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
                    <div class="grid md:grid-cols-4 gap-4">
                        <!-- ÂÖ≥ÈîÆËØçÊêúÁ¥¢ -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ÂÖ≥ÈîÆËØçÊêúÁ¥¢</label>
                            <input type="text" x-model="searchKeyword" @input="searchQuestions()"
                                   placeholder="ÊêúÁ¥¢È¢òÁõÆÂÜÖÂÆπ..." 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                        </div>
                        
                        <!-- ÁßëÁõÆÁ≠õÈÄâ -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ÁßëÁõÆ</label>
                            <select x-model="filterSubject" @change="searchQuestions()"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                                <option value="">ÂÖ®ÈÉ®ÁßëÁõÆ</option>
                                <optgroup label="ÂÖ¨ÂÖ±ËØæ">
                                    <option value="È´òÁ≠âÊï∞Â≠¶">È´òÁ≠âÊï∞Â≠¶</option>
                                    <option value="Á∫øÊÄß‰ª£Êï∞">Á∫øÊÄß‰ª£Êï∞</option>
                                    <option value="Ê¶ÇÁéáËÆ∫‰∏éÊï∞ÁêÜÁªüËÆ°">Ê¶ÇÁéáËÆ∫‰∏éÊï∞ÁêÜÁªüËÆ°</option>
                                    <option value="ÊîøÊ≤ª">ÊîøÊ≤ª</option>
                                    <option value="Ëã±ËØ≠">Ëã±ËØ≠</option>
                                </optgroup>
                                <optgroup label="‰∏ì‰∏öËØæ">
                                    <option value="Êï∞ÊçÆÁªìÊûÑ">Êï∞ÊçÆÁªìÊûÑ</option>
                                    <option value="ÁÆóÊ≥ïËÆæËÆ°">ÁÆóÊ≥ïËÆæËÆ°</option>
                                    <option value="Êìç‰ΩúÁ≥ªÁªü">Êìç‰ΩúÁ≥ªÁªü</option>
                                    <option value="ËÆ°ÁÆóÊú∫ÁΩëÁªú">ËÆ°ÁÆóÊú∫ÁΩëÁªú</option>
                                    <option value="ËÆ°ÁÆóÊú∫ÁªÑÊàêÂéüÁêÜ">ËÆ°ÁÆóÊú∫ÁªÑÊàêÂéüÁêÜ</option>
                                    <option value="Êï∞ÊçÆÂ∫ì">Êï∞ÊçÆÂ∫ì</option>
                                </optgroup>
                            </select>
                        </div>
                        
                        <!-- ÈöæÂ∫¶Á≠õÈÄâ -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ÈöæÂ∫¶</label>
                            <select x-model="filterDifficulty" @change="searchQuestions()"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                                <option value="">ÂÖ®ÈÉ®ÈöæÂ∫¶</option>
                                <option value="ÁÆÄÂçï">ÁÆÄÂçï</option>
                                <option value="‰∏≠Á≠â">‰∏≠Á≠â</option>
                                <option value="Âõ∞Èöæ">Âõ∞Èöæ</option>
                            </select>
                        </div>
                        
                        <!-- Âπ¥‰ªΩÁ≠õÈÄâ -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Âπ¥‰ªΩ</label>
                            <select x-model="filterYear" @change="searchQuestions()"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                                <option value="">ÂÖ®ÈÉ®Âπ¥‰ªΩ</option>
                                <optgroup label="ËøëÂπ¥ÁúüÈ¢ò">
                                    <option value="2024">2024Âπ¥</option>
                                    <option value="2023">2023Âπ¥</option>
                                    <option value="2022">2022Âπ¥</option>
                                    <option value="2021">2021Âπ¥</option>
                                    <option value="2020">2020Âπ¥</option>
                                </optgroup>
                                <optgroup label="ÂéÜÂπ¥ÁúüÈ¢ò">
                                    <option value="2019">2019Âπ¥</option>
                                    <option value="2018">2018Âπ¥</option>
                                    <option value="2017">2017Âπ¥</option>
                                    <option value="2016">2016Âπ¥</option>
                                    <option value="2015">2015Âπ¥</option>
                                    <option value="2014">2014Âπ¥</option>
                                </optgroup>
                            </select>
                        </div>
                    </div>
                    
                    <!-- ÊêúÁ¥¢ÁªìÊûú -->
                    <div x-show="searchResults.length > 0" class="mt-6">
                        <div class="flex justify-between items-center mb-4">
                            <div class="flex items-center space-x-4">
                                <span class="text-sm text-gray-600">
                                    ÊâæÂà∞ <span class="font-medium text-indigo-600" x-text="searchResults.length"></span> ÈÅìÈ¢òÁõÆ
                                </span>
                                <span class="text-sm text-gray-500" x-show="selectedQuestionIds.length > 0">
                                    Â∑≤ÈÄâÊã© <span class="font-medium text-green-600" x-text="selectedQuestionIds.length"></span> ÈÅì
                                </span>
                            </div>
                            <div class="flex space-x-2">
                                <button @click="selectAllSearchResults()" 
                                        class="bg-gray-500 text-white px-3 py-2 rounded text-sm hover:bg-gray-600 transition">
                                    ÂÖ®ÈÄâ
                                </button>
                                <button @click="clearSelections()" 
                                        class="bg-gray-300 text-gray-700 px-3 py-2 rounded text-sm hover:bg-gray-400 transition">
                                    Ê∏ÖÁ©∫
                                </button>
                                <button @click="startCustomPractice()" 
                                        :disabled="selectedQuestionIds.length === 0"
                                        class="bg-indigo-500 text-white px-4 py-2 rounded hover:bg-indigo-600 transition disabled:opacity-50 disabled:cursor-not-allowed">
                                    ÂºÄÂßãÁªÉ‰π† (<span x-text="selectedQuestionIds.length"></span>)
                                </button>
                            </div>
                        </div>
                        
                        <!-- ÊêúÁ¥¢ÁªìÊûúÂàóË°® -->
                        <div class="max-h-80 overflow-y-auto space-y-2 border rounded-lg p-4 bg-gray-50">
                            <template x-for="question in searchResults.slice(0, 20)" :key="question.id">
                                <div class="flex items-center p-3 bg-white rounded border hover:bg-blue-50 cursor-pointer transition"
                                     @click="toggleQuestionSelection(question.id)"
                                     :class="selectedQuestionIds.includes(question.id) ? 'ring-2 ring-blue-200 bg-blue-50' : ''">
                                    <input type="checkbox" 
                                           :checked="selectedQuestionIds.includes(question.id)"
                                           class="mr-3 text-indigo-600 focus:ring-indigo-500">
                                    <div class="flex-1">
                                        <div class="flex items-center space-x-2 mb-2">
                                            <span class="text-xs px-2 py-1 rounded font-medium"
                                                  :class="getSubjectBadgeStyle(question.subject)" 
                                                  x-text="question.subject"></span>
                                            <span class="text-xs bg-gray-200 text-gray-700 px-2 py-1 rounded" 
                                                  x-text="question.year + 'Âπ¥'"></span>
                                            <span class="text-xs px-2 py-1 rounded"
                                                  :class="getDifficultyBadgeStyle(question.difficulty)" 
                                                  x-text="question.difficulty"></span>
                                            <span class="text-xs text-gray-500" x-text="question.points + 'ÂàÜ'"></span>
                                        </div>
                                        <p class="text-sm text-gray-800 line-clamp-2" x-text="question.question"></p>
                                        <div class="mt-2 flex items-center space-x-3 text-xs text-gray-500">
                                            <button @click.stop="previewQuestion(question)" 
                                                    class="hover:text-blue-600 transition">
                                                <i class="fas fa-eye mr-1"></i>È¢ÑËßà
                                            </button>
                                            <button @click.stop="toggleFavorite(question)" 
                                                    :class="isFavorite(question.id) ? 'text-yellow-500' : 'hover:text-yellow-600'"
                                                    class="transition">
                                                <i class="fas fa-star mr-1"></i>Êî∂Ëóè
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </template>
                            <div x-show="searchResults.length > 20" class="text-center pt-4">
                                <p class="text-sm text-gray-500">ÊòæÁ§∫Ââç20‰∏™ÁªìÊûúÔºåÂÖ± <span x-text="searchResults.length"></span> ‰∏™</p>
                            </div>
                        </div>
                        
                        <!-- Á≠õÈÄâÊù°‰ª∂ÊÄªÁªì -->
                        <div class="mt-4 flex flex-wrap gap-2" x-show="hasActiveFilters()">
                            <span class="text-sm text-gray-600">ÂΩìÂâçÁ≠õÈÄâ:</span>
                            <span x-show="searchKeyword.trim()" class="inline-flex items-center px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded">
                                ÂÖ≥ÈîÆËØç: <span x-text="searchKeyword"></span>
                                <button @click="searchKeyword = ''; searchQuestions()" class="ml-1 hover:text-blue-600">√ó</button>
                            </span>
                            <span x-show="filterSubject" class="inline-flex items-center px-2 py-1 bg-green-100 text-green-800 text-xs rounded">
                                ÁßëÁõÆ: <span x-text="filterSubject"></span>
                                <button @click="filterSubject = ''; searchQuestions()" class="ml-1 hover:text-green-600">√ó</button>
                            </span>
                            <span x-show="filterDifficulty" class="inline-flex items-center px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded">
                                ÈöæÂ∫¶: <span x-text="filterDifficulty"></span>
                                <button @click="filterDifficulty = ''; searchQuestions()" class="ml-1 hover:text-yellow-600">√ó</button>
                            </span>
                            <span x-show="filterYear" class="inline-flex items-center px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded">
                                Âπ¥‰ªΩ: <span x-text="filterYear + 'Âπ¥'"></span>
                                <button @click="filterYear = ''; searchQuestions()" class="ml-1 hover:text-purple-600">√ó</button>
                            </span>
                            <button @click="clearAllFilters()" class="inline-flex items-center px-2 py-1 bg-red-100 text-red-800 text-xs rounded hover:bg-red-200">
                                Ê∏ÖÈô§ÊâÄÊúâÁ≠õÈÄâ
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="bg-white rounded-lg shadow-lg p-6 card-hover cursor-pointer"
                         @click="startQuickPractice('mixed')">
                        <div class="text-center">
                            <i class="fas fa-random text-3xl text-purple-500 mb-4"></i>
                            <h4 class="text-lg font-semibold mb-2">ÈöèÊú∫ÁªÉ‰π†</h4>
                            <p class="text-gray-600 text-sm mb-4">‰ªéÈ¢òÂ∫ì‰∏≠ÈöèÊú∫ÊäΩÂèñ10ÈÅìÈ¢ò</p>
                            <div class="bg-purple-50 rounded p-3">
                                <div class="text-purple-600 font-medium">Êé®ËçêÊñ∞Êâã</div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow-lg p-6 card-hover cursor-pointer"
                         @click="startQuickPractice('wrong')">
                        <div class="text-center">
                            <i class="fas fa-redo text-3xl text-red-500 mb-4"></i>
                            <h4 class="text-lg font-semibold mb-2">ÈîôÈ¢òÈáçÂÅö</h4>
                            <p class="text-gray-600 text-sm mb-4">Â§ç‰π†‰πãÂâçÂÅöÈîôÁöÑÈ¢òÁõÆ</p>
                            <div class="bg-red-50 rounded p-3">
                                <div class="text-red-600 font-medium" x-text="wrongQuestions.length + 'ÈÅìÂæÖÂ§ç‰π†'"></div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow-lg p-6 card-hover cursor-pointer"
                         @click="startQuickPractice('favorite')">
                        <div class="text-center">
                            <i class="fas fa-star text-3xl text-yellow-500 mb-4"></i>
                            <h4 class="text-lg font-semibold mb-2">Êî∂ËóèÈ¢òÁõÆ</h4>
                            <p class="text-gray-600 text-sm mb-4">ÁªÉ‰π†Êî∂ËóèÁöÑÈáçÁÇπÈ¢òÁõÆ</p>
                            <div class="bg-yellow-50 rounded p-3">
                                <div class="text-yellow-600 font-medium" x-text="favoriteQuestions.length + 'ÈÅìÂ∑≤Êî∂Ëóè'"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ÂàÜÁßëÁªÉ‰π†Âå∫Âüü -->
        <section class="bg-gray-100 py-16">
            <div class="max-w-7xl mx-auto px-4">
                <h3 class="text-2xl font-bold text-center mb-12 text-gray-800">üìö ÂàÜÁßëÁªÉ‰π†</h3>
                
                <!-- ÁßëÁõÆÁ≠õÈÄâÊ†áÁ≠æ -->
                <div class="flex justify-center mb-8">
                    <div class="inline-flex bg-white p-1 rounded-lg shadow-sm">
                        <button @click="subjectFilter = 'all'" 
                                :class="subjectFilter === 'all' ? 'bg-indigo-500 text-white' : 'text-gray-600 hover:text-indigo-600'"
                                class="px-4 py-2 rounded-md text-sm font-medium transition">
                            ÂÖ®ÈÉ®ÁßëÁõÆ
                        </button>
                        <button @click="subjectFilter = 'public'" 
                                :class="subjectFilter === 'public' ? 'bg-indigo-500 text-white' : 'text-gray-600 hover:text-indigo-600'"
                                class="px-4 py-2 rounded-md text-sm font-medium transition">
                            ÂÖ¨ÂÖ±ËØæ
                        </button>
                        <button @click="subjectFilter = 'professional'" 
                                :class="subjectFilter === 'professional' ? 'bg-indigo-500 text-white' : 'text-gray-600 hover:text-indigo-600'"
                                class="px-4 py-2 rounded-md text-sm font-medium transition">
                            ‰∏ì‰∏öËØæ
                        </button>
                    </div>
                </div>

                <!-- ÂÖ¨ÂÖ±ËØæÂå∫Âüü -->
                <div x-show="subjectFilter === 'all' || subjectFilter === 'public'" class="mb-12">
                    <h4 class="text-lg font-semibold text-gray-700 mb-6 text-center">üìñ ÂÖ¨ÂÖ±ËØæ</h4>
                    <div class="grid md:grid-cols-2 lg:grid-cols-5 gap-6">
                        <template x-for="subject in subjects.filter(s => s.category === 'public')" :key="subject.id">
                            <div class="bg-white rounded-lg shadow-lg overflow-hidden card-hover cursor-pointer"
                                 @click="startSubjectPractice(subject.id)">
                                <!-- ÁßëÁõÆÂ§¥ÈÉ® -->
                                <div class="p-6 text-white text-center"
                                     :style="`background: linear-gradient(135deg, ${subject.color1} 0%, ${subject.color2} 100%)`">
                                    <i :class="subject.icon" class="text-3xl mb-3"></i>
                                    <h4 class="text-lg font-semibold" x-text="subject.name"></h4>
                                    <p class="text-sm opacity-90" x-text="subject.description"></p>
                                </div>
                                
                                <!-- ÁªüËÆ°‰ø°ÊÅØ -->
                                <div class="p-6">
                                    <div class="grid grid-cols-2 gap-4 text-center">
                                        <div>
                                            <div class="text-xl font-bold text-gray-800" x-text="subject.totalQuestions"></div>
                                            <div class="text-xs text-gray-500">È¢òÁõÆÊÄªÊï∞</div>
                                        </div>
                                        <div>
                                            <div class="text-xl font-bold text-green-600" x-text="subject.completed"></div>
                                            <div class="text-xs text-gray-500">Â∑≤ÂÆåÊàê</div>
                                        </div>
                                    </div>
                                    
                                    <!-- ËøõÂ∫¶Êù° -->
                                    <div class="mt-4">
                                        <div class="flex justify-between text-xs text-gray-500 mb-1">
                                            <span>ËøõÂ∫¶</span>
                                            <span x-text="subject.totalQuestions > 0 ? Math.round((subject.completed / subject.totalQuestions) * 100) + '%' : '0%'"></span>
                                        </div>
                                        <div class="w-full bg-gray-200 rounded-full h-2">
                                            <div class="bg-gradient-to-r from-green-400 to-green-600 h-2 rounded-full transition-all duration-300"
                                                 :style="`width: ${subject.totalQuestions > 0 ? (subject.completed / subject.totalQuestions) * 100 : 0}%`"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </template>
                    </div>
                </div>

                <!-- ‰∏ì‰∏öËØæÂå∫Âüü -->
                <div x-show="subjectFilter === 'all' || subjectFilter === 'professional'">
                    <h4 class="text-lg font-semibold text-gray-700 mb-6 text-center">üíª ‰∏ì‰∏öËØæ</h4>
                    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <template x-for="subject in subjects.filter(s => s.category === 'professional')" :key="subject.id">
                            <div class="bg-white rounded-lg shadow-lg overflow-hidden card-hover cursor-pointer"
                                 @click="startSubjectPractice(subject.id)">
                                <!-- ÁßëÁõÆÂ§¥ÈÉ® -->
                                <div class="p-6 text-white text-center"
                                     :style="`background: linear-gradient(135deg, ${subject.color1} 0%, ${subject.color2} 100%)`">
                                    <i :class="subject.icon" class="text-3xl mb-3"></i>
                                    <h4 class="text-lg font-semibold" x-text="subject.name"></h4>
                                    <p class="text-sm opacity-90" x-text="subject.description"></p>
                                </div>
                                
                                <!-- ÁªüËÆ°‰ø°ÊÅØ -->
                                <div class="p-6">
                                    <div class="grid grid-cols-2 gap-4 text-center mb-4">
                                        <div>
                                            <div class="text-xl font-bold text-gray-800" x-text="subject.totalQuestions"></div>
                                            <div class="text-xs text-gray-500">È¢òÁõÆÊÄªÊï∞</div>
                                        </div>
                                        <div>
                                            <div class="text-xl font-bold text-green-600" x-text="subject.completed"></div>
                                            <div class="text-xs text-gray-500">Â∑≤ÂÆåÊàê</div>
                                        </div>
                                    </div>
                                    
                                    <!-- ËøõÂ∫¶Êù° -->
                                    <div>
                                        <div class="flex justify-between text-xs text-gray-500 mb-1">
                                            <span>ËøõÂ∫¶</span>
                                            <span x-text="subject.totalQuestions > 0 ? Math.round((subject.completed / subject.totalQuestions) * 100) + '%' : '0%'"></span>
                                        </div>
                                        <div class="w-full bg-gray-200 rounded-full h-2">
                                            <div class="bg-gradient-to-r from-indigo-400 to-indigo-600 h-2 rounded-full transition-all duration-300"
                                                 :style="`width: ${subject.totalQuestions > 0 ? (subject.completed / subject.totalQuestions) * 100 : 0}%`"></div>
                                        </div>
                                    </div>

                                    <!-- ÁªÉ‰π†ËÆæÁΩÆÊåâÈíÆ -->
                                    <div class="mt-4 flex space-x-2">
                                        <button @click.stop="showPracticeSettings(subject)" 
                                                class="flex-1 bg-gray-100 text-gray-700 py-2 px-3 rounded text-sm hover:bg-gray-200 transition">
                                            <i class="fas fa-cog mr-1"></i>ËÆæÁΩÆ
                                        </button>
                                        <button @click.stop="showSubjectStats(subject)" 
                                                class="flex-1 bg-indigo-100 text-indigo-700 py-2 px-3 rounded text-sm hover:bg-indigo-200 transition">
                                            <i class="fas fa-chart-line mr-1"></i>ÁªüËÆ°
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </template>
                    </div>
                </div>
            </div>
        </section>

        <!-- Âπ¥‰ªΩÁªÉ‰π†Âå∫Âüü -->
        <section class="py-16">
            <div class="max-w-7xl mx-auto px-4">
                <h3 class="text-2xl font-bold text-center mb-12 text-gray-800">üìÖ ÊåâÂπ¥‰ªΩÁªÉ‰π†</h3>
                
                <!-- Âπ¥‰ªΩÁ≠õÈÄâÂíåÁªüËÆ° -->
                <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
                    <div class="grid md:grid-cols-2 gap-6">
                        <!-- Âπ¥‰ªΩËåÉÂõ¥ÈÄâÊã© -->
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-4">üìä Âπ¥‰ªΩÂàÜÊûê</h4>
                            <div class="grid grid-cols-2 gap-4 text-center">
                                <div class="bg-blue-50 rounded-lg p-3">
                                    <div class="text-xl font-bold text-blue-600" x-text="getYearRange().earliest"></div>
                                    <div class="text-sm text-gray-600">ÊúÄÊó©Âπ¥‰ªΩ</div>
                                </div>
                                <div class="bg-green-50 rounded-lg p-3">
                                    <div class="text-xl font-bold text-green-600" x-text="getYearRange().latest"></div>
                                    <div class="text-sm text-gray-600">ÊúÄÊñ∞Âπ¥‰ªΩ</div>
                                </div>
                                <div class="bg-purple-50 rounded-lg p-3">
                                    <div class="text-xl font-bold text-purple-600" x-text="getTotalYearQuestions()"></div>
                                    <div class="text-sm text-gray-600">ÂéÜÂπ¥È¢òÁõÆÊÄªÊï∞</div>
                                </div>
                                <div class="bg-orange-50 rounded-lg p-3">
                                    <div class="text-xl font-bold text-orange-600" x-text="getCompletedYears().length"></div>
                                    <div class="text-sm text-gray-600">Â∑≤ÂÆåÊàêÂπ¥‰ªΩ</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Âø´ÈÄüÂπ¥‰ªΩÈÄâÊã© -->
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-4">üéØ Âø´ÈÄüÁªÉ‰π†</h4>
                            <div class="space-y-3">
                                <button @click="startRecentYearsPractice()" 
                                        class="w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white py-3 px-4 rounded-lg hover:from-blue-600 hover:to-blue-700 transition">
                                    <i class="fas fa-calendar-alt mr-2"></i>Ëøë3Âπ¥ÁúüÈ¢òÁªÉ‰π†
                                </button>
                                <button @click="startRandomYearPractice()" 
                                        class="w-full bg-gradient-to-r from-purple-500 to-purple-600 text-white py-3 px-4 rounded-lg hover:from-purple-600 hover:to-purple-700 transition">
                                    <i class="fas fa-random mr-2"></i>ÈöèÊú∫Âπ¥‰ªΩÁªÉ‰π†
                                </button>
                                <button @click="startIncompleteYearsPractice()" 
                                        class="w-full bg-gradient-to-r from-orange-500 to-orange-600 text-white py-3 px-4 rounded-lg hover:from-orange-600 hover:to-orange-700 transition">
                                    <i class="fas fa-clock mr-2"></i>Êú™ÂÆåÊàêÂπ¥‰ªΩÁªÉ‰π†
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Âπ¥‰ªΩÂç°ÁâáÁΩëÊ†º -->
                <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-10 gap-4">
                    <template x-for="year in years" :key="year.year">
                        <div class="bg-white rounded-lg shadow-lg overflow-hidden card-hover cursor-pointer transform transition-all duration-300"
                             @click="startYearPractice(year.year)"
                             :class="getYearCardStyle(year)">
                            <!-- Âπ¥‰ªΩÂ§¥ÈÉ® -->
                            <div class="text-white p-4 text-center"
                                 :style="getYearGradient(year)">
                                <div class="text-lg font-bold mb-1" x-text="year.year"></div>
                                <div class="text-xs opacity-90">Âπ¥ÁúüÈ¢ò</div>
                            </div>
                            
                            <!-- ÁªüËÆ°‰ø°ÊÅØ -->
                            <div class="p-4">
                                <div class="text-center mb-3">
                                    <div class="text-xl font-bold text-gray-800" x-text="year.questions"></div>
                                    <div class="text-xs text-gray-500">ÈÅìÈ¢òÁõÆ</div>
                                </div>
                                
                                <!-- ËøõÂ∫¶Êù° -->
                                <div class="mb-3">
                                    <div class="flex justify-between text-xs text-gray-500 mb-1">
                                        <span>ËøõÂ∫¶</span>
                                        <span x-text="getYearProgress(year) + '%'"></span>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-1.5">
                                        <div class="h-1.5 rounded-full transition-all duration-300"
                                             :class="getProgressBarColor(year)"
                                             :style="`width: ${getYearProgress(year)}%`"></div>
                                    </div>
                                </div>
                                
                                <!-- ÂÆåÊàêÁä∂ÊÄÅ -->
                                <div class="text-center">
                                    <div class="text-xs font-medium"
                                         :class="getYearStatusColor(year)"
                                         x-text="getYearStatusText(year)"></div>
                                    <div class="text-xs text-gray-400 mt-1" x-text="year.completed + '/' + year.questions"></div>
                                </div>
                                
                                <!-- Êìç‰ΩúÊåâÈíÆ -->
                                <div class="mt-3 flex space-x-1">
                                    <button @click.stop="showYearStats(year)" 
                                            class="flex-1 bg-gray-100 text-gray-600 py-1 px-2 rounded text-xs hover:bg-gray-200 transition">
                                        <i class="fas fa-chart-line"></i>
                                    </button>
                                    <button @click.stop="resetYearProgress(year)" 
                                            x-show="year.completed > 0"
                                            class="flex-1 bg-red-100 text-red-600 py-1 px-2 rounded text-xs hover:bg-red-200 transition">
                                        <i class="fas fa-redo"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </template>
                </div>
                
                <!-- Âπ¥‰ªΩÂàÜÁªÑËßÜÂõæÂàáÊç¢ -->
                <div class="mt-8 text-center">
                    <div class="inline-flex bg-white p-1 rounded-lg shadow-sm">
                        <button @click="yearViewMode = 'all'" 
                                :class="yearViewMode === 'all' ? 'bg-indigo-500 text-white' : 'text-gray-600 hover:text-indigo-600'"
                                class="px-4 py-2 rounded-md text-sm font-medium transition">
                            ÂÖ®ÈÉ®Âπ¥‰ªΩ
                        </button>
                        <button @click="yearViewMode = 'recent'" 
                                :class="yearViewMode === 'recent' ? 'bg-indigo-500 text-white' : 'text-gray-600 hover:text-indigo-600'"
                                class="px-4 py-2 rounded-md text-sm font-medium transition">
                            ËøëÂπ¥ÁúüÈ¢ò (2020-2024)
                        </button>
                        <button @click="yearViewMode = 'incomplete'" 
                                :class="yearViewMode === 'incomplete' ? 'bg-indigo-500 text-white' : 'text-gray-600 hover:text-indigo-600'"
                                class="px-4 py-2 rounded-md text-sm font-medium transition">
                            Êú™ÂÆåÊàêÂπ¥‰ªΩ
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- ÁªìÊûúÁªüËÆ°ÂºπÁ™ó -->
    <div x-show="showResults" 
         class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
        <div class="bg-white rounded-xl max-w-md w-full p-6">
            <div class="text-center mb-6">
                <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-check text-green-500 text-2xl"></i>
                </div>
                <h3 class="text-xl font-bold text-gray-800 mb-2">ÁªÉ‰π†ÂÆåÊàêÔºÅ</h3>
                <p class="text-gray-600">Êú¨Ê¨°ÁªÉ‰π†ÁªüËÆ°</p>
            </div>
            
            <div class="space-y-4 mb-6">
                <div class="flex justify-between">
                    <span class="text-gray-600">ÊÄªÈ¢òÊï∞:</span>
                    <span class="font-medium" x-text="practiceResults.total"></span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">Ê≠£Á°ÆÊï∞:</span>
                    <span class="font-medium text-green-600" x-text="practiceResults.correct"></span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">ÈîôËØØÊï∞:</span>
                    <span class="font-medium text-red-600" x-text="practiceResults.wrong"></span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">Ê≠£Á°ÆÁéá:</span>
                    <span class="font-medium text-indigo-600" x-text="practiceResults.accuracy + '%'"></span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">Áî®Êó∂:</span>
                    <span class="font-medium" x-text="formatTime(practiceResults.timeUsed)"></span>
                </div>
            </div>
            
            <div class="flex space-x-3">
                <button @click="showResults = false" 
                        class="flex-1 bg-gray-100 text-gray-700 py-3 rounded-lg hover:bg-gray-200 transition">
                    ÁªßÁª≠ÁªÉ‰π†
                </button>
                <button @click="viewWrongQuestions()" 
                        class="flex-1 bg-indigo-500 text-white py-3 rounded-lg hover:bg-indigo-600 transition">
                    Êü•ÁúãÈîôÈ¢ò
                </button>
            </div>
        </div>
    </div>

    <!-- ÁªüËÆ°ËØ¶ÊÉÖÊ®°ÊÄÅÊ°Ü -->
    <div x-show="showStatsModal" 
         class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
        <div class="bg-white rounded-xl max-w-2xl w-full p-6">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-bold text-gray-800">üìä Â≠¶‰π†ÁªüËÆ°ËØ¶ÊÉÖ</h3>
                <button @click="showStatsModal = false" class="text-gray-400 hover:text-gray-600">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <div class="grid md:grid-cols-2 gap-6 mb-6">
                <!-- ÊÄª‰ΩìÁªüËÆ° -->
                <div class="bg-gray-50 rounded-lg p-4">
                    <h4 class="font-semibold text-gray-800 mb-3">üìà ÊÄª‰ΩìÊï∞ÊçÆ</h4>
                    <div class="space-y-2">
                        <div class="flex justify-between">
                            <span class="text-gray-600">ÊÄªÂÆåÊàêÈ¢òÊï∞:</span>
                            <span class="font-medium" x-text="totalCompleted"></span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">ÊÄª‰ΩìÊ≠£Á°ÆÁéá:</span>
                            <span class="font-medium" :class="accuracyRate >= 80 ? 'text-green-600' : accuracyRate >= 60 ? 'text-yellow-600' : 'text-red-600'" x-text="accuracyRate + '%'"></span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">‰ªäÊó•ÂÆåÊàê:</span>
                            <span class="font-medium text-indigo-600" x-text="dailyCompleted"></span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">ÁªÉ‰π†Ê¨°Êï∞:</span>
                            <span class="font-medium" x-text="practiceHistory.length"></span>
                        </div>
                    </div>
                </div>

                <!-- ËØ¶ÁªÜÁªüËÆ° -->
                <div class="bg-gray-50 rounded-lg p-4">
                    <h4 class="font-semibold text-gray-800 mb-3">üîç ËØ¶ÁªÜÂàÜÊûê</h4>
                    <div class="space-y-2" id="detailed-stats">
                        <!-- ÈÄöËøáJavaScriptÂä®ÊÄÅÂ°´ÂÖÖ -->
                    </div>
                </div>
            </div>

            <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6">
                <h4 class="font-semibold text-yellow-800 mb-2">üìã Ê≠£Á°ÆÁéáËÆ°ÁÆóËØ¥Êòé</h4>
                <div class="text-sm text-yellow-700 space-y-1">
                    <p><strong>ËÆ°ÁÆóÂÖ¨Âºè:</strong> Ê≠£Á°ÆÁéá = (ÂéÜÂè≤ÊÄªÁ≠îÂØπÈ¢òÊï∞ √∑ ÂéÜÂè≤ÊÄªÁ≠îÈ¢òÊï∞) √ó 100%</p>
                    <p><strong>Êï∞ÊçÆÊù•Ê∫ê:</strong> ÁªüËÆ°ÊâÄÊúâÁªÉ‰π†‰ºöËØùÁöÑÁ≠îÈ¢òÁªìÊûú</p>
                    <p><strong>ÂÆûÊó∂Êõ¥Êñ∞:</strong> ÊØèÊ¨°ÂÆåÊàêÁªÉ‰π†ÂêéËá™Âä®Êõ¥Êñ∞</p>
                    <p><strong>Êï∞ÊçÆÊåÅ‰πÖÂåñ:</strong> ‰øùÂ≠òÂú®ÊµèËßàÂô®Êú¨Âú∞Â≠òÂÇ®‰∏≠</p>
                </div>
            </div>

            <div class="flex justify-between">
                <button @click="showDetailedStats()" 
                        class="bg-indigo-500 text-white px-4 py-2 rounded-lg hover:bg-indigo-600 transition">
                    Êü•ÁúãËØ¶ÁªÜÁªüËÆ°
                </button>
                <button @click="resetStats()" 
                        class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition">
                    ÈáçÁΩÆÁªüËÆ°Êï∞ÊçÆ
                </button>
            </div>
        </div>
    </div>

    <!-- È°µËÑö -->
    <footer class="bg-gray-800 text-white py-8">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="text-gray-300">&copy; 2026 ËÆ°ÁÆóÊú∫ËÄÉÁ†îÂ≠¶‰π†Âπ≥Âè∞. ËÆ©ÊØè‰∏ÄÊ¨°ÁªÉ‰π†ÈÉΩÊúâ‰ª∑ÂÄº</p>
        </div>
    </footer>

    <script>
        function practiceApp() {
            return {
                // Âü∫Á°ÄÊï∞ÊçÆ
                totalCompleted: 0,
                accuracyRate: 0, // Â∞Ü‰ªélocalStorageËÆ°ÁÆóÂæóÂá∫
                dailyCompleted: 0,
                
                // Êñ∞Â¢ûÊï∞ÊçÆÂ±ûÊÄß
                subjectFilter: 'all',
                yearViewMode: 'all',
                
                // ÊêúÁ¥¢Á≠õÈÄâ
                searchKeyword: '',
                filterSubject: '',
                filterDifficulty: '',
                filterYear: '',
                searchResults: [],
                selectedQuestionIds: [],
                
                // ÈîôÈ¢òÊú¨ÂíåÊî∂Ëóè
                wrongQuestions: [],
                favoriteQuestions: [],
                
                // ÁªÉ‰π†ÂéÜÂè≤
                practiceHistory: [],
                filteredHistory: [],
                historyFilter: '',
                
                // Â≠¶‰π†ËÆ°ÂàíÂíåÁõÆÊ†á
                studyPlans: [],
                studyGoals: [],
                showPlanForm: false,
                showGoalForm: false,
                newPlan: {
                    targetDate: '',
                    dailyHours: 3
                },
                newGoal: {
                    goalType: '',
                    targetValue: '',
                    deadline: ''
                },
                
                // ÂΩìÂâçÁî®Êà∑ID (ÂÆûÈôÖÂ∫îÁî®‰∏≠‰ªéÁôªÂΩïÁä∂ÊÄÅËé∑Âèñ)
                currentUserId: 1,
                
                // ÂΩìÂâçÁªÉ‰π†‰ºöËØùID
                currentSessionId: null,
                
                // ÁªÉ‰π†Áä∂ÊÄÅ
                currentQuestion: null,
                currentQuestionIndex: 0,
                selectedQuestions: [],
                selectedAnswer: null,
                showAnswer: false,
                timeRemaining: 0,
                timer: null,
                showResults: false,
                showHistoryView: false,
                showStatsModal: false,
                practiceResults: {},
                
                // ÁßëÁõÆÊï∞ÊçÆ - ÂåÖÂê´ÂÖ¨ÂÖ±ËØæÂíå‰∏ì‰∏öËØæ
                subjects: [
                    // ÂÖ¨ÂÖ±ËØæ
                    {
                        id: 'mathematics',
                        name: 'È´òÁ≠âÊï∞Â≠¶',
                        description: 'ÊûÅÈôê„ÄÅÂØºÊï∞„ÄÅÁßØÂàÜ',
                        icon: 'fas fa-square-root-alt',
                        color1: '#3b82f6',
                        color2: '#1d4ed8',
                        totalQuestions: 0,
                        completed: 0,
                        category: 'public'
                    },
                    {
                        id: 'linear_algebra',
                        name: 'Á∫øÊÄß‰ª£Êï∞',
                        description: 'Áü©Èòµ„ÄÅÂêëÈáè„ÄÅÁ∫øÊÄßÊñπÁ®ã',
                        icon: 'fas fa-calculator',
                        color1: '#06b6d4',
                        color2: '#0891b2',
                        totalQuestions: 0,
                        completed: 0,
                        category: 'public'
                    },
                    {
                        id: 'probability',
                        name: 'Ê¶ÇÁéáËÆ∫‰∏éÊï∞ÁêÜÁªüËÆ°',
                        description: 'Ê¶ÇÁéá„ÄÅÈöèÊú∫ÂèòÈáè„ÄÅÁªüËÆ°',
                        icon: 'fas fa-chart-bar',
                        color1: '#f59e0b',
                        color2: '#d97706',
                        totalQuestions: 0,
                        completed: 0,
                        category: 'public'
                    },
                    {
                        id: 'politics',
                        name: 'ÊîøÊ≤ª',
                        description: 'È©¨Âéü„ÄÅÊØõÊ¶Ç„ÄÅÂè≤Á∫≤„ÄÅÊÄù‰øÆ',
                        icon: 'fas fa-flag',
                        color1: '#ef4444',
                        color2: '#dc2626',
                        totalQuestions: 0,
                        completed: 0,
                        category: 'public'
                    },
                    {
                        id: 'english',
                        name: 'Ëã±ËØ≠',
                        description: 'ÈòÖËØª„ÄÅÂÜô‰Ωú„ÄÅÁøªËØë',
                        icon: 'fas fa-language',
                        color1: '#10b981',
                        color2: '#059669',
                        totalQuestions: 0,
                        completed: 0,
                        category: 'public'
                    },
                    // ‰∏ì‰∏öËØæ
                    {
                        id: 'datastructure',
                        name: 'Êï∞ÊçÆÁªìÊûÑ',
                        description: 'Á∫øÊÄßË°®„ÄÅÊ†ë„ÄÅÂõæÁ≠â',
                        icon: 'fas fa-sitemap',
                        color1: '#8b5cf6',
                        color2: '#7c3aed',
                        totalQuestions: 0,
                        completed: 0,
                        category: 'professional'
                    },
                    {
                        id: 'algorithm',
                        name: 'ÁÆóÊ≥ïËÆæËÆ°',
                        description: 'ÊéíÂ∫è„ÄÅÊü•Êâæ„ÄÅÂä®ÊÄÅËßÑÂàí',
                        icon: 'fas fa-code',
                        color1: '#a855f7',
                        color2: '#9333ea',
                        totalQuestions: 0,
                        completed: 0,
                        category: 'professional'
                    },
                    {
                        id: 'os',
                        name: 'Êìç‰ΩúÁ≥ªÁªü',
                        description: 'ËøõÁ®ã„ÄÅÂÜÖÂ≠ò„ÄÅÊñá‰ª∂Á≥ªÁªü',
                        icon: 'fas fa-desktop',
                        color1: '#f59e0b',
                        color2: '#d97706',
                        totalQuestions: 0,
                        completed: 0,
                        category: 'professional'
                    },
                    {
                        id: 'network',
                        name: 'ËÆ°ÁÆóÊú∫ÁΩëÁªú',
                        description: 'TCP/IP„ÄÅOSIÊ®°Âûã',
                        icon: 'fas fa-network-wired',
                        color1: '#06b6d4',
                        color2: '#0891b2',
                        totalQuestions: 0,
                        completed: 0,
                        category: 'professional'
                    },
                    {
                        id: 'organization',
                        name: 'ËÆ°ÁÆóÊú∫ÁªÑÊàêÂéüÁêÜ',
                        description: 'CPU„ÄÅÂÜÖÂ≠ò„ÄÅI/O',
                        icon: 'fas fa-microchip',
                        color1: '#f97316',
                        color2: '#ea580c',
                        totalQuestions: 0,
                        completed: 0,
                        category: 'professional'
                    },
                    {
                        id: 'database',
                        name: 'Êï∞ÊçÆÂ∫ì',
                        description: 'SQL„ÄÅÂÖ≥Á≥ªÊ®°Âûã„ÄÅÁ¥¢Âºï',
                        icon: 'fas fa-database',
                        color1: '#84cc16',
                        color2: '#65a30d',
                        totalQuestions: 0,
                        completed: 0,
                        category: 'professional'
                    }
                ],
                
                // Âπ¥‰ªΩÊï∞ÊçÆ
                years: [
                    { year: 2024, questions: 150, completed: 23 },
                    { year: 2023, questions: 148, completed: 148 },
                    { year: 2022, questions: 145, completed: 132 },
                    { year: 2021, questions: 142, completed: 98 },
                    { year: 2020, questions: 140, completed: 76 },
                    { year: 2019, questions: 138, completed: 45 },
                    { year: 2018, questions: 135, completed: 28 },
                    { year: 2017, questions: 132, completed: 15 },
                    { year: 2016, questions: 130, completed: 8 },
                    { year: 2015, questions: 128, completed: 3 }
                ],
                
                // Á§∫‰æãÈ¢òÁõÆÊï∞ÊçÆ - Áé∞Âú®‰ªéÈ¢òÂ∫ìÁÆ°ÁêÜÂô®Ëé∑Âèñ
                sampleQuestions: [],
                
                // ÂàùÂßãÂåñ
                init() {
                    // Á≠âÂæÖÈ¢òÂ∫ìÁÆ°ÁêÜÂô®Âä†ËΩΩÂÆåÊàê
                    this.$nextTick(() => {
                        this.loadQuestionsFromBank();
                        this.updateSubjectStats();
                        // Âä†ËΩΩÈîôÈ¢òÊú¨ÂíåÊî∂ËóèÊï∞ÊçÆ
                        this.loadWrongQuestions();
                        this.loadFavoriteQuestions();
                        this.loadPracticeHistory();
                        this.loadStudyPlans();
                        this.loadStudyGoals();
                    });
                },

                // ‰ªéÈ¢òÂ∫ìÁÆ°ÁêÜÂô®Âä†ËΩΩÈ¢òÁõÆ
                loadQuestionsFromBank() {
                    if (window.questionBank && window.questionBank.questions) {
                        this.sampleQuestions = window.questionBank.questions.map(q => ({
                            id: q.id,
                            subject: q.subject,
                            year: q.year,
                            difficulty: q.difficulty,
                            points: q.points || 2,
                            question: q.question,
                            options: q.options,
                            correctAnswer: q.correct_answer,
                            explanation: q.explanation || 'ÊöÇÊó†Ëß£Êûê'
                        }));
                        console.log(`üìö Â∑≤Âä†ËΩΩ ${this.sampleQuestions.length} ÈÅìÈ¢òÁõÆ`);
                        
                        // Êõ¥Êñ∞ÁªüËÆ°‰ø°ÊÅØ
                        this.updateTotalCompleted();
                    } else {
                        console.warn('‚ö†Ô∏è È¢òÂ∫ìÁÆ°ÁêÜÂô®Êú™ÊâæÂà∞Ôºå‰ΩøÁî®ÈªòËÆ§È¢òÁõÆ');
                        // ‰øùÊåÅÂéüÊúâÁöÑÁ§∫‰æãÈ¢òÁõÆ‰Ωú‰∏∫Â§áÁî®
                        this.sampleQuestions = [
                            {
                                id: 1,
                                subject: 'Êï∞ÊçÆÁªìÊûÑ',
                                year: 2023,
                                difficulty: '‰∏≠Á≠â',
                                points: 2,
                                question: 'Âú®‰∏Ä‰∏™ÈïøÂ∫¶‰∏∫nÁöÑÈ°∫Â∫èË°®‰∏≠ÔºåÂú®Á¨¨i‰∏™‰ΩçÁΩÆ‰∏äÊèíÂÖ•‰∏Ä‰∏™ÂÖÉÁ¥†Êó∂ÈúÄË¶ÅÁßªÂä®ÁöÑÂÖÉÁ¥†‰∏™Êï∞‰∏∫ÔºàÔºâ',
                                options: [
                                    'n-i',
                                    'n-i+1', 
                                    'n-i-1',
                                    'i'
                                ],
                                correctAnswer: 0,
                                explanation: 'Âú®È°∫Â∫èË°®ÁöÑÁ¨¨i‰∏™‰ΩçÁΩÆÊèíÂÖ•ÂÖÉÁ¥†Êó∂ÔºåÈúÄË¶ÅÂ∞ÜÁ¨¨i‰∏™‰ΩçÁΩÆÂèäÂÖ∂ÂêéÈù¢ÁöÑÊâÄÊúâÂÖÉÁ¥†ÂêëÂêéÁßªÂä®‰∏Ä‰Ωç„ÄÇÁî±‰∫éÈ°∫Â∫èË°®ÈïøÂ∫¶‰∏∫nÔºåÁ¨¨i‰∏™‰ΩçÁΩÆÂêéÈù¢ËøòÊúân-i‰∏™ÂÖÉÁ¥†ÈúÄË¶ÅÁßªÂä®„ÄÇ'
                            },
                            {
                                id: 2,
                                subject: 'Êìç‰ΩúÁ≥ªÁªü',
                                year: 2023,
                                difficulty: 'Âõ∞Èöæ',
                                points: 3,
                                question: '‰∏ãÂàóÂÖ≥‰∫éÊ≠ªÈîÅÁöÑÂèôËø∞‰∏≠ÔºåÊ≠£Á°ÆÁöÑÊòØÔºàÔºâ',
                                options: [
                                    'Âè™ÊúâÂú®Á≥ªÁªü‰∏≠ÂêåÊó∂Âá∫Áé∞Âõõ‰∏™ÂøÖË¶ÅÊù°‰ª∂Êó∂ÔºåÊâç‰ºöÂèëÁîüÊ≠ªÈîÅ',
                                    'Ê≠ªÈîÅÈ¢ÑÈò≤ÊòØÈÄöËøáËÆæÁΩÆÊüê‰∫õÈôêÂà∂Êù°‰ª∂ÔºåÂéªÁ†¥Âùè‰∫ßÁîüÊ≠ªÈîÅÁöÑÂõõ‰∏™ÂøÖË¶ÅÊù°‰ª∂‰∏≠ÁöÑ‰∏Ä‰∏™ÊàñÂá†‰∏™',
                                    'Ê≠ªÈîÅÈÅøÂÖçÊòØÂΩìËøõÁ®ãÊèêÂá∫ËµÑÊ∫êËØ∑Ê±ÇÊó∂ÔºåÁ≥ªÁªüÊµãËØïÂàÜÈÖçÂêéÊòØÂê¶‰ºö‰∫ßÁîüÊ≠ªÈîÅ',
                                    '‰ª•‰∏äÈÉΩÊ≠£Á°Æ'
                                ],
                                correctAnswer: 3,
                                explanation: 'Âõõ‰∏™ÈÄâÈ°πÈÉΩÊòØÊ≠£Á°ÆÁöÑ„ÄÇÊ≠ªÈîÅÁöÑÂõõ‰∏™ÂøÖË¶ÅÊù°‰ª∂ÂêåÊó∂Êª°Ë∂≥Êó∂‰ºöÂèëÁîüÊ≠ªÈîÅÔºõÊ≠ªÈîÅÈ¢ÑÈò≤ÈÄöËøáÁ†¥ÂùèÂøÖË¶ÅÊù°‰ª∂Êù•Èò≤Ê≠¢Ê≠ªÈîÅÔºõÊ≠ªÈîÅÈÅøÂÖçÈÄöËøáÈì∂Ë°åÂÆ∂ÁÆóÊ≥ïÁ≠âÊñπÊ≥ïÂú®ÂàÜÈÖçËµÑÊ∫êÂâçËøõË°åÂÆâÂÖ®ÊÄßÊ£ÄÊü•„ÄÇ'
                            },
                            {
                                id: 3,
                                subject: 'ËÆ°ÁÆóÊú∫ÁΩëÁªú',
                                year: 2022,
                                difficulty: 'ÁÆÄÂçï',
                                points: 2,
                                question: 'TCPÂçèËÆÆÊèê‰æõÁöÑÊòØÔºàÔºâ',
                                options: [
                                    'ÂèØÈù†ÁöÑÊï∞ÊçÆÊä•ÊúçÂä°',
                                    '‰∏çÂèØÈù†ÁöÑÊï∞ÊçÆÊä•ÊúçÂä°',
                                    'ÂèØÈù†ÁöÑÂ≠óËäÇÊµÅÊúçÂä°',
                                    '‰∏çÂèØÈù†ÁöÑÂ≠óËäÇÊµÅÊúçÂä°'
                                ],
                                correctAnswer: 2,
                                explanation: 'TCPÔºà‰º†ËæìÊéßÂà∂ÂçèËÆÆÔºâÊèê‰æõÈù¢ÂêëËøûÊé•ÁöÑÂèØÈù†Â≠óËäÇÊµÅÊúçÂä°„ÄÇÂÆÉÈÄöËøáÂ∫èÂè∑„ÄÅÁ°ÆËÆ§„ÄÅÈáç‰º†Á≠âÊú∫Âà∂‰øùËØÅÊï∞ÊçÆÁöÑÂèØÈù†‰º†ËæìÔºåÂπ∂‰∏î‰ª•Â≠óËäÇÊµÅÁöÑÊñπÂºèÊèê‰æõÊúçÂä°„ÄÇ'
                            }
                        ];
                    }
                },

                // Êõ¥Êñ∞ÁßëÁõÆÁªüËÆ°‰ø°ÊÅØ
                updateSubjectStats() {
                    const questionCounts = this.sampleQuestions.reduce((acc, q) => {
                        acc[q.subject] = (acc[q.subject] || 0) + 1;
                        return acc;
                    }, {});

                    // ÁßëÁõÆÊò†Â∞ÑË°® - ‰∏éstartSubjectPractice‰∏≠ÁöÑÊò†Â∞Ñ‰øùÊåÅ‰∏ÄËá¥
                    const subjectMapping = {
                        // ÂÖ¨ÂÖ±ËØæ
                        'mathematics': 'È´òÁ≠âÊï∞Â≠¶',
                        'linear_algebra': 'Á∫øÊÄß‰ª£Êï∞', 
                        'probability': 'Ê¶ÇÁéáËÆ∫‰∏éÊï∞ÁêÜÁªüËÆ°',
                        'politics': 'ÊîøÊ≤ª',
                        'english': 'Ëã±ËØ≠',
                        // ‰∏ì‰∏öËØæ
                        'datastructure': 'Êï∞ÊçÆÁªìÊûÑ',
                        'algorithm': 'ÁÆóÊ≥ïËÆæËÆ°',
                        'os': 'Êìç‰ΩúÁ≥ªÁªü',
                        'network': 'ËÆ°ÁÆóÊú∫ÁΩëÁªú',
                        'organization': 'ËÆ°ÁÆóÊú∫ÁªÑÊàêÂéüÁêÜ',
                        'database': 'Êï∞ÊçÆÂ∫ì'
                    };

                    // Êõ¥Êñ∞ÁßëÁõÆÊï∞ÊçÆ
                    this.subjects.forEach(subject => {
                        const subjectName = subjectMapping[subject.id];
                        if (subjectName) {
                            subject.totalQuestions = questionCounts[subjectName] || 0;
                        }
                    });

                    // Êõ¥Êñ∞Âπ¥‰ªΩÊï∞ÊçÆ
                    const yearCounts = this.sampleQuestions.reduce((acc, q) => {
                        acc[q.year] = (acc[q.year] || 0) + 1;
                        return acc;
                    }, {});

                    this.years.forEach(year => {
                        year.questions = yearCounts[year.year] || 0;
                    });
                },

                // Âà∑Êñ∞È¢òÁõÆÊï∞ÊçÆ
                refreshQuestions() {
                    // ÈáçÊñ∞Âä†ËΩΩÈ¢òÂ∫ìÁÆ°ÁêÜÂô®
                    if (window.questionBank) {
                        window.questionBank = new QuestionBankManager();
                    }
                    
                    // ÈáçÊñ∞Âä†ËΩΩÈ¢òÁõÆ
                    this.loadQuestionsFromBank();
                    this.updateSubjectStats();
                    
                    this.showToast('È¢òÁõÆÊï∞ÊçÆÂ∑≤Âà∑Êñ∞', 'success');
                },

                // Êõ¥Êñ∞ÊÄªÂÆåÊàêÊï∞ÂíåÊ≠£Á°ÆÁéá
                updateTotalCompleted() {
                    // ‰ªélocalStorageËé∑ÂèñÁªÉ‰π†ÂéÜÂè≤Êù•ËÆ°ÁÆóÊÄªÂÆåÊàêÊï∞
                    const completed = localStorage.getItem('totalCompleted');
                    if (completed) {
                        this.totalCompleted = parseInt(completed);
                    } else {
                        this.totalCompleted = 0;
                    }
                    
                    // ËÆ°ÁÆóÁúüÂÆûÁöÑÊÄª‰ΩìÊ≠£Á°ÆÁéá
                    this.calculateAccuracyRate();
                    
                    // ËÆ°ÁÆó‰ªäÊó•ÂÆåÊàêÊï∞
                    this.calculateDailyCompleted();
                },

                // ËÆ°ÁÆóÊÄª‰ΩìÊ≠£Á°ÆÁéá
                calculateAccuracyRate() {
                    const practiceStats = localStorage.getItem('practiceStats');
                    if (practiceStats) {
                        try {
                            const stats = JSON.parse(practiceStats);
                            if (stats.totalAnswered > 0) {
                                this.accuracyRate = Math.round((stats.totalCorrect / stats.totalAnswered) * 100);
                            } else {
                                this.accuracyRate = 0;
                            }
                        } catch (error) {
                            console.error('Ëß£ÊûêÁªÉ‰π†ÁªüËÆ°Êï∞ÊçÆÂ§±Ë¥•:', error);
                            this.accuracyRate = 0;
                        }
                    } else {
                        this.accuracyRate = 0;
                    }
                },

                // ËÆ°ÁÆó‰ªäÊó•ÂÆåÊàêÊï∞
                calculateDailyCompleted() {
                    const today = new Date().toDateString();
                    const dailyStats = localStorage.getItem('dailyStats');
                    
                    if (dailyStats) {
                        try {
                            const stats = JSON.parse(dailyStats);
                            this.dailyCompleted = stats[today] || 0;
                        } catch (error) {
                            console.error('Ëß£ÊûêÊØèÊó•ÁªüËÆ°Êï∞ÊçÆÂ§±Ë¥•:', error);
                            this.dailyCompleted = 0;
                        }
                    } else {
                        this.dailyCompleted = 0;
                    }
                },

                // Êõ¥Êñ∞ÁªÉ‰π†ÁªüËÆ°
                updatePracticeStats(correct, wrong) {
                    // Êõ¥Êñ∞ÊÄª‰ΩìÁªüËÆ°
                    let practiceStats = { totalCorrect: 0, totalAnswered: 0 };
                    const saved = localStorage.getItem('practiceStats');
                    if (saved) {
                        try {
                            practiceStats = JSON.parse(saved);
                        } catch (error) {
                            console.error('Ëß£ÊûêÁªÉ‰π†ÁªüËÆ°Êï∞ÊçÆÂ§±Ë¥•:', error);
                        }
                    }
                    
                    practiceStats.totalCorrect += correct;
                    practiceStats.totalAnswered += (correct + wrong);
                    localStorage.setItem('practiceStats', JSON.stringify(practiceStats));
                    
                    // Êõ¥Êñ∞ÊØèÊó•ÁªüËÆ°
                    const today = new Date().toDateString();
                    let dailyStats = {};
                    const savedDaily = localStorage.getItem('dailyStats');
                    if (savedDaily) {
                        try {
                            dailyStats = JSON.parse(savedDaily);
                        } catch (error) {
                            console.error('Ëß£ÊûêÊØèÊó•ÁªüËÆ°Êï∞ÊçÆÂ§±Ë¥•:', error);
                        }
                    }
                    
                    dailyStats[today] = (dailyStats[today] || 0) + correct + wrong;
                    localStorage.setItem('dailyStats', JSON.stringify(dailyStats));
                    
                    // ÈáçÊñ∞ËÆ°ÁÆóÊòæÁ§∫ÁöÑÊï∞ÊçÆ
                    this.calculateAccuracyRate();
                    this.calculateDailyCompleted();
                },
                
                // Âä†ËΩΩÁªÉ‰π†ÂéÜÂè≤
                async loadPracticeHistory() {
                    try {
                        const response = await fetch(`/api/practice/users/${this.currentUserId}/history?limit=10`);
                        if (response.ok) {
                            const data = await response.json();
                            this.practiceHistory = data.sessions;
                            this.filteredHistory = [...this.practiceHistory];
                        }
                    } catch (error) {
                        console.error('Âä†ËΩΩÁªÉ‰π†ÂéÜÂè≤Â§±Ë¥•:', error);
                        // Â¶ÇÊûúAPIÂ§±Ë¥•Ôºå‰ΩøÁî®ÈªòËÆ§Êï∞ÊçÆ
                        this.practiceHistory = [
                            {
                                id: 1,
                                sessionName: 'ÈöèÊú∫ÁªÉ‰π†',
                                sessionType: 'mixed',
                                totalQuestions: 10,
                                correctCount: 8,
                                accuracyRate: 80,
                                timeSpent: 720,
                                startedAt: '2024-01-15 14:30:00'
                            },
                            {
                                id: 2,
                                sessionName: 'Êï∞ÊçÆÁªìÊûÑ',
                                sessionType: 'subject',
                                totalQuestions: 15,
                                correctCount: 12,
                                accuracyRate: 80,
                                timeSpent: 900,
                                startedAt: '2024-01-14 16:20:00'
                            }
                        ];
                        this.filteredHistory = [...this.practiceHistory];
                    }
                },
                
                // Á≠õÈÄâÁªÉ‰π†ÂéÜÂè≤
                filterHistory() {
                    let filtered = [...this.practiceHistory];
                    
                    // ÊåâÁ±ªÂûãÁ≠õÈÄâ
                    if (this.historyFilter) {
                        filtered = filtered.filter(record => record.sessionType === this.historyFilter);
                    }
                    
                    // ÊåâÈöæÂ∫¶Á≠õÈÄâ
                    if (this.difficultyFilter) {
                        filtered = filtered.filter(record => {
                            const accuracy = record.accuracyRate || 0;
                            switch(this.difficultyFilter) {
                                case 'high':
                                    return accuracy >= 80;
                                case 'medium':
                                    return accuracy >= 60 && accuracy < 80;
                                case 'low':
                                    return accuracy < 60;
                                default:
                                    return true;
                            }
                        });
                    }
                    
                    this.filteredHistory = filtered;
                },
                
                // Âä†ËΩΩÂ≠¶‰π†ËÆ°Âàí
                async loadStudyPlans() {
                    try {
                        const response = await fetch(`/api/practice/users/${this.currentUserId}/plans`);
                        if (response.ok) {
                            const data = await response.json();
                            this.studyPlans = data.plans;
                        }
                    } catch (error) {
                        console.error('Âä†ËΩΩÂ≠¶‰π†ËÆ°ÂàíÂ§±Ë¥•:', error);
                        this.studyPlans = [];
                    }
                },
                
                // Âä†ËΩΩÂ≠¶‰π†ÁõÆÊ†á
                async loadStudyGoals() {
                    try {
                        const response = await fetch(`/api/practice/users/${this.currentUserId}/goals`);
                        if (response.ok) {
                            const data = await response.json();
                            this.studyGoals = data.goals;
                        }
                    } catch (error) {
                        console.error('Âä†ËΩΩÂ≠¶‰π†ÁõÆÊ†áÂ§±Ë¥•:', error);
                        this.studyGoals = [];
                    }
                },
                
                // ÂàõÂª∫Â≠¶‰π†ËÆ°Âàí
                async createStudyPlan() {
                    if (!this.newPlan.targetDate || !this.newPlan.dailyHours) {
                        this.showToast('ËØ∑Â°´ÂÜôÂÆåÊï¥ÁöÑËÆ°Âàí‰ø°ÊÅØ', 'error');
                        return;
                    }
                    
                    try {
                        const response = await fetch(`/api/practice/users/${this.currentUserId}/plans`, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify(this.newPlan)
                        });
                        
                        if (response.ok) {
                            this.showToast('Â≠¶‰π†ËÆ°ÂàíÂàõÂª∫ÊàêÂäü', 'success');
                            this.showPlanForm = false;
                            this.newPlan = { targetDate: '', dailyHours: 3 };
                            this.loadStudyPlans();
                        } else {
                            this.showToast('ÂàõÂª∫Â≠¶‰π†ËÆ°ÂàíÂ§±Ë¥•', 'error');
                        }
                    } catch (error) {
                        console.error('ÂàõÂª∫Â≠¶‰π†ËÆ°ÂàíÂ§±Ë¥•:', error);
                        this.showToast('ÂàõÂª∫Â≠¶‰π†ËÆ°ÂàíÂ§±Ë¥•', 'error');
                    }
                },
                
                // ÂàõÂª∫Â≠¶‰π†ÁõÆÊ†á
                async createStudyGoal() {
                    if (!this.newGoal.goalType || !this.newGoal.targetValue) {
                        this.showToast('ËØ∑Â°´ÂÜôÂÆåÊï¥ÁöÑÁõÆÊ†á‰ø°ÊÅØ', 'error');
                        return;
                    }
                    
                    try {
                        const response = await fetch(`/api/practice/users/${this.currentUserId}/goals`, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify(this.newGoal)
                        });
                        
                        if (response.ok) {
                            this.showToast('Â≠¶‰π†ÁõÆÊ†áÂàõÂª∫ÊàêÂäü', 'success');
                            this.showGoalForm = false;
                            this.newGoal = { goalType: '', targetValue: '', deadline: '' };
                            this.loadStudyGoals();
                        } else {
                            this.showToast('ÂàõÂª∫Â≠¶‰π†ÁõÆÊ†áÂ§±Ë¥•', 'error');
                        }
                    } catch (error) {
                        console.error('ÂàõÂª∫Â≠¶‰π†ÁõÆÊ†áÂ§±Ë¥•:', error);
                        this.showToast('ÂàõÂª∫Â≠¶‰π†ÁõÆÊ†áÂ§±Ë¥•', 'error');
                    }
                },
                
                // Ëé∑ÂèñÁõÆÊ†áÁ±ªÂûãÂêçÁß∞
                getGoalTypeName(goalType) {
                    const typeNames = {
                        'daily_questions': 'ÊØèÊó•Á≠îÈ¢òÊï∞',
                        'weekly_accuracy': 'Âë®Ê≠£Á°ÆÁéá',
                        'monthly_sessions': 'ÊúàÁªÉ‰π†Ê¨°Êï∞'
                    };
                    return typeNames[goalType] || goalType;
                },
                
                // Âä†ËΩΩÈîôÈ¢òÊú¨
                loadWrongQuestions() {
                    const saved = localStorage.getItem('wrongQuestions');
                    if (saved) {
                        this.wrongQuestions = JSON.parse(saved);
                    } else {
                        // Á§∫‰æãÈîôÈ¢òÊï∞ÊçÆ
                        this.wrongQuestions = [this.sampleQuestions[0], this.sampleQuestions[1]];
                    }
                },
                
                // ‰øùÂ≠òÈîôÈ¢òÊú¨
                saveWrongQuestions() {
                    localStorage.setItem('wrongQuestions', JSON.stringify(this.wrongQuestions));
                },
                
                // Ê∑ªÂä†ÈîôÈ¢ò
                addToWrongQuestions(question) {
                    if (!this.wrongQuestions.find(q => q.id === question.id)) {
                        this.wrongQuestions.push(question);
                        this.saveWrongQuestions();
                    }
                },
                
                // ‰ªéÈîôÈ¢òÊú¨ÁßªÈô§
                removeFromWrongQuestions(questionId) {
                    this.wrongQuestions = this.wrongQuestions.filter(q => q.id !== questionId);
                    this.saveWrongQuestions();
                },
                
                // Âä†ËΩΩÊî∂ËóèÈ¢òÁõÆ
                loadFavoriteQuestions() {
                    const saved = localStorage.getItem('favoriteQuestions');
                    if (saved) {
                        this.favoriteQuestions = JSON.parse(saved);
                    } else {
                        // Á§∫‰æãÊî∂ËóèÊï∞ÊçÆ
                        this.favoriteQuestions = [this.sampleQuestions[1], this.sampleQuestions[2]];
                    }
                },
                
                // ‰øùÂ≠òÊî∂ËóèÈ¢òÁõÆ
                saveFavoriteQuestions() {
                    localStorage.setItem('favoriteQuestions', JSON.stringify(this.favoriteQuestions));
                },
                
                // ÂàáÊç¢Êî∂ËóèÁä∂ÊÄÅ
                toggleFavorite(question) {
                    const index = this.favoriteQuestions.findIndex(q => q.id === question.id);
                    if (index > -1) {
                        this.favoriteQuestions.splice(index, 1);
                        this.showToast('Â∑≤ÂèñÊ∂àÊî∂Ëóè', 'info');
                    } else {
                        this.favoriteQuestions.push(question);
                        this.showToast('Â∑≤Ê∑ªÂä†Âà∞Êî∂Ëóè', 'success');
                    }
                    this.saveFavoriteQuestions();
                },
                
                // Ê£ÄÊü•ÊòØÂê¶Â∑≤Êî∂Ëóè
                isFavorite(questionId) {
                    return this.favoriteQuestions.some(q => q.id === questionId);
                },
                
                // Ëé∑ÂèñÈöèÊú∫È¢òÁõÆ
                getRandomQuestions(count) {
                    const allQuestions = [...this.sampleQuestions];
                    const shuffled = allQuestions.sort(() => 0.5 - Math.random());
                    return shuffled.slice(0, Math.min(count, allQuestions.length));
                },
                
                // ÊêúÁ¥¢È¢òÁõÆ
                searchQuestions() {
                    let filtered = [...this.sampleQuestions];
                    
                    // ÂÖ≥ÈîÆËØçÊêúÁ¥¢
                    if (this.searchKeyword.trim()) {
                        const keyword = this.searchKeyword.toLowerCase();
                        filtered = filtered.filter(q => 
                            q.question.toLowerCase().includes(keyword) ||
                            q.options.some(option => option.toLowerCase().includes(keyword)) ||
                            q.explanation.toLowerCase().includes(keyword)
                        );
                    }
                    
                    // ÁßëÁõÆÁ≠õÈÄâ
                    if (this.filterSubject) {
                        filtered = filtered.filter(q => q.subject === this.filterSubject);
                    }
                    
                    // ÈöæÂ∫¶Á≠õÈÄâ
                    if (this.filterDifficulty) {
                        filtered = filtered.filter(q => q.difficulty === this.filterDifficulty);
                    }
                    
                    // Âπ¥‰ªΩÁ≠õÈÄâ
                    if (this.filterYear) {
                        filtered = filtered.filter(q => q.year.toString() === this.filterYear);
                    }
                    
                    this.searchResults = filtered;
                },
                
                // ÂàáÊç¢È¢òÁõÆÈÄâÊã©Áä∂ÊÄÅ
                toggleQuestionSelection(questionId) {
                    const index = this.selectedQuestionIds.indexOf(questionId);
                    if (index > -1) {
                        this.selectedQuestionIds.splice(index, 1);
                    } else {
                        this.selectedQuestionIds.push(questionId);
                    }
                },
                
                // ÂºÄÂßãËá™ÂÆö‰πâÁªÉ‰π†
                startCustomPractice() {
                    if (this.selectedQuestionIds.length === 0) {
                        this.showToast('ËØ∑Ëá≥Â∞ëÈÄâÊã©‰∏ÄÈÅìÈ¢òÁõÆ', 'error');
                        return;
                    }
                    
                    const selectedQuestions = this.sampleQuestions.filter(q => 
                        this.selectedQuestionIds.includes(q.id)
                    );
                    this.startPractice(selectedQuestions, 'custom');
                },
                
                // ÊêúÁ¥¢ÂíåÁ≠õÈÄâËæÖÂä©ÊñπÊ≥ï
                selectAllSearchResults() {
                    this.searchResults.forEach(question => {
                        if (!this.selectedQuestionIds.includes(question.id)) {
                            this.selectedQuestionIds.push(question.id);
                        }
                    });
                },
                
                clearSelections() {
                    this.selectedQuestionIds = [];
                },
                
                hasActiveFilters() {
                    return this.searchKeyword.trim() || this.filterSubject || this.filterDifficulty || this.filterYear;
                },
                
                clearAllFilters() {
                    this.searchKeyword = '';
                    this.filterSubject = '';
                    this.filterDifficulty = '';
                    this.filterYear = '';
                    this.searchQuestions();
                },
                
                getSubjectBadgeStyle(subject) {
                    const publicSubjects = ['È´òÁ≠âÊï∞Â≠¶', 'Á∫øÊÄß‰ª£Êï∞', 'Ê¶ÇÁéáËÆ∫‰∏éÊï∞ÁêÜÁªüËÆ°', 'ÊîøÊ≤ª', 'Ëã±ËØ≠'];
                    if (publicSubjects.includes(subject)) {
                        return 'bg-blue-100 text-blue-800';
                    }
                    return 'bg-purple-100 text-purple-800';
                },
                
                getDifficultyBadgeStyle(difficulty) {
                    switch(difficulty) {
                        case 'ÁÆÄÂçï': return 'bg-green-100 text-green-800';
                        case '‰∏≠Á≠â': return 'bg-yellow-100 text-yellow-800';
                        case 'Âõ∞Èöæ': return 'bg-red-100 text-red-800';
                        default: return 'bg-gray-100 text-gray-800';
                    }
                },
                
                previewQuestion(question) {
                    const preview = `È¢òÁõÆÈ¢ÑËßà\n\n„Äê${question.subject}„Äë${question.year}Âπ¥ - ${question.difficulty}\n\n${question.question}\n\nÈÄâÈ°π:\n${question.options.map((opt, idx) => `${String.fromCharCode(65 + idx)}. ${opt}`).join('\n')}\n\nÊ≠£Á°ÆÁ≠îÊ°à: ${String.fromCharCode(65 + question.correctAnswer)}\n\nËß£Êûê: ${question.explanation || 'ÊöÇÊó†Ëß£Êûê'}`;
                    alert(preview);
                },
                
                // Âø´ÈÄüÁªÉ‰π†
                startQuickPractice(type) {
                    let questions = [];
                    switch(type) {
                        case 'mixed':
                            // ÈöèÊú∫ÈÄâÊã©10ÈÅìÈ¢ò
                            questions = this.getRandomQuestions(10);
                            break;
                        case 'wrong':
                            // ÈîôÈ¢ò
                            questions = [...this.wrongQuestions];
                            if (questions.length === 0) {
                                this.showToast('ÈîôÈ¢òÊú¨‰∏∫Á©∫ÔºåÁªßÁª≠ÁªÉ‰π†ÁßØÁ¥ØÈîôÈ¢òÂêßÔºÅ', 'info');
                                return;
                            }
                            break;
                        case 'favorite':
                            // Êî∂ËóèÈ¢òÁõÆ
                            questions = [...this.favoriteQuestions];
                            if (questions.length === 0) {
                                this.showToast('Êî∂ËóèÂ§π‰∏∫Á©∫ÔºåÂÖàÊî∂Ëóè‰∏Ä‰∫õÈáçÁÇπÈ¢òÁõÆÂêßÔºÅ', 'info');
                                return;
                            }
                            break;
                    }
                    switch(type) {
                        case 'mixed':
                            this.startPractice(questions, 'mixed');
                            break;
                        case 'wrong':
                            this.startPractice(questions, 'wrong');
                            break;
                        case 'favorite':
                            this.startPractice(questions, 'favorite');
                            break;
                    }
                },
                
                // ÁßëÁõÆÁªÉ‰π†
                startSubjectPractice(subjectId) {
                    // ÁßëÁõÆIDÂà∞‰∏≠ÊñáÂêçÁß∞ÁöÑÊò†Â∞Ñ
                    const subjectMapping = {
                        // ÂÖ¨ÂÖ±ËØæ
                        'mathematics': 'È´òÁ≠âÊï∞Â≠¶',
                        'linear_algebra': 'Á∫øÊÄß‰ª£Êï∞', 
                        'probability': 'Ê¶ÇÁéáËÆ∫‰∏éÊï∞ÁêÜÁªüËÆ°',
                        'politics': 'ÊîøÊ≤ª',
                        'english': 'Ëã±ËØ≠',
                        // ‰∏ì‰∏öËØæ
                        'datastructure': 'Êï∞ÊçÆÁªìÊûÑ',
                        'algorithm': 'ÁÆóÊ≥ïËÆæËÆ°',
                        'os': 'Êìç‰ΩúÁ≥ªÁªü',
                        'network': 'ËÆ°ÁÆóÊú∫ÁΩëÁªú',
                        'organization': 'ËÆ°ÁÆóÊú∫ÁªÑÊàêÂéüÁêÜ',
                        'database': 'Êï∞ÊçÆÂ∫ì'
                    };
                    
                    const subjectName = subjectMapping[subjectId];
                    if (!subjectName) {
                        this.showToast('Êú™Áü•ÁßëÁõÆID', 'error');
                        return;
                    }
                    
                    const questions = this.sampleQuestions.filter(q => q.subject === subjectName);
                    if (questions.length === 0) {
                        this.showToast(`${subjectName}È¢òÁõÆÊ≠£Âú®Êï¥ÁêÜ‰∏≠...`, 'info');
                        return;
                    }
                    const subject = this.subjects.find(s => s.id === subjectId);
                    this.startPractice(questions, 'subject', { subject: subject?.name });
                },
                
                // Âπ¥‰ªΩÁªÉ‰π†
                startYearPractice(year) {
                    const questions = this.sampleQuestions.filter(q => q.year === year);
                    if (questions.length === 0) {
                        this.showToast(`${year}Âπ¥ÁúüÈ¢òÊ≠£Âú®Êï¥ÁêÜ‰∏≠...`, 'info');
                        return;
                    }
                    this.startPractice(questions, 'year', { year: year });
                },
                
                // ÂºÄÂßãÁªÉ‰π†
                async startPractice(questions, sessionType = 'mixed', filters = {}) {
                    this.selectedQuestions = questions;
                    this.currentQuestionIndex = 0;
                    this.currentQuestion = questions[0];
                    this.selectedAnswer = null;
                    this.showAnswer = false;
                    this.timeRemaining = questions.length * 180; // ÊØèÈ¢ò3ÂàÜÈíü
                    this.practiceResults = {
                        total: questions.length,
                        correct: 0,
                        wrong: 0,
                        accuracy: 0,
                        timeUsed: 0,
                        answers: []
                    };

                    // ÂêØÂä®Â≠¶‰π†ÁªüËÆ°‰ºöËØù
                    if (window.studyStats) {
                        const subjectName = filters.subject || sessionType;
                        const chapterName = filters.year ? `${filters.year}Âπ¥ÁúüÈ¢ò` : 'ÁªÉ‰π†';
                        window.studyStats.startStudySession(subjectName, chapterName);
                        console.log('üìä Â∑≤ÂêØÂä®Â≠¶‰π†ÁªüËÆ°ËøΩË∏™:', { subject: subjectName, chapter: chapterName });
                    }

                    // ÂàõÂª∫ÁªÉ‰π†‰ºöËØù
                    try {
                        const response = await fetch('/api/practice/sessions', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                userId: this.currentUserId,
                                sessionType: sessionType,
                                subjectFilter: filters.subject || null,
                                difficultyFilter: filters.difficulty || null,
                                yearFilter: filters.year || null
                            })
                        });

                        if (response.ok) {
                            const data = await response.json();
                            this.currentSessionId = data.sessionId;
                        }
                    } catch (error) {
                        console.error('ÂàõÂª∫ÁªÉ‰π†‰ºöËØùÂ§±Ë¥•:', error);
                    }

                    this.startTimer();
                },
                
                startTimer() {
                    if (this.timer) clearInterval(this.timer);
                    this.timer = setInterval(() => {
                        if (this.timeRemaining > 0) {
                            this.timeRemaining--;
                        } else {
                            this.finishPractice();
                        }
                    }, 1000);
                },
                
                formatTime(seconds) {
                    const minutes = Math.floor(seconds / 60);
                    const secs = seconds % 60;
                    return `${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
                },

                formatDate(dateString) {
                    if (!dateString) return '';
                    const date = new Date(dateString);
                    const now = new Date();
                    const diffTime = Math.abs(now - date);
                    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                    
                    if (diffDays === 1) {
                        return '‰ªäÂ§©';
                    } else if (diffDays === 2) {
                        return 'Êò®Â§©';
                    } else if (diffDays <= 7) {
                        return `${diffDays}Â§©Ââç`;
                    } else {
                        return date.toLocaleDateString('zh-CN');
                    }
                },
                
                selectOption(index) {
                    if (!this.showAnswer) {
                        this.selectedAnswer = index;
                    }
                },
                
                checkAnswer() {
                    if (this.selectedAnswer === null) return;
                    
                    this.showAnswer = true;
                    const isCorrect = this.selectedAnswer === this.currentQuestion.correctAnswer;
                    
                    // ËÆ∞ÂΩïÁ≠îÊ°àÂà∞Â≠¶‰π†ÁªüËÆ°
                    if (window.studyStats) {
                        window.studyStats.recordAnswer(isCorrect, this.currentQuestion.subject || 'ÁªÉ‰π†');
                    }
                    
                    // ËÆ∞ÂΩïÁ≠îÊ°à
                    this.practiceResults.answers.push({
                        questionId: this.currentQuestion.id,
                        userAnswer: this.selectedAnswer,
                        correctAnswer: this.currentQuestion.correctAnswer,
                        isCorrect: isCorrect,
                        timeSpent: this.getQuestionTime()
                    });
                    
                    if (isCorrect) {
                        this.practiceResults.correct++;
                        this.showToast('‚úÖ Á≠îÂØπ‰∫ÜÔºÅ', 'success');
                        // Á≠îÂØπ‰∫ÜÔºå‰ªéÈîôÈ¢òÊú¨‰∏≠ÁßªÈô§ÔºàÂ¶ÇÊûúÂ≠òÂú®Ôºâ
                        this.removeFromWrongQuestions(this.currentQuestion.id);
                    } else {
                        this.practiceResults.wrong++;
                        this.showToast('‚ùå Á≠îÈîô‰∫ÜÔºåÂ∑≤Âä†ÂÖ•ÈîôÈ¢òÊú¨', 'error');
                        // Á≠îÈîô‰∫ÜÔºåÂä†ÂÖ•ÈîôÈ¢òÊú¨
                        this.addToWrongQuestions(this.currentQuestion);
                    }
                },
                
                getQuestionTime() {
                    // ËÆ°ÁÆóÂΩìÂâçÈ¢òÁõÆÁî®Êó∂ÔºàÁÆÄÂåñÁâàÔºâ
                    return Math.floor(Math.random() * 120) + 30; // 30-150Áßí
                },
                
                nextQuestion() {
                    if (this.currentQuestionIndex < this.selectedQuestions.length - 1) {
                        this.currentQuestionIndex++;
                        this.currentQuestion = this.selectedQuestions[this.currentQuestionIndex];
                        this.selectedAnswer = null;
                        this.showAnswer = false;
                    }
                },
                
                previousQuestion() {
                    if (this.currentQuestionIndex > 0) {
                        this.currentQuestionIndex--;
                        this.currentQuestion = this.selectedQuestions[this.currentQuestionIndex];
                        // ÊÅ¢Â§ç‰πãÂâçÁöÑÁ≠îÊ°àÁä∂ÊÄÅ
                        const previousAnswer = this.practiceResults.answers.find(a => a.questionId === this.currentQuestion.id);
                        if (previousAnswer) {
                            this.selectedAnswer = previousAnswer.userAnswer;
                            this.showAnswer = true;
                        } else {
                            this.selectedAnswer = null;
                            this.showAnswer = false;
                        }
                    }
                },
                
                async finishPractice() {
                    if (this.timer) clearInterval(this.timer);
                    
                    // ÁªìÊùüÂ≠¶‰π†ÁªüËÆ°‰ºöËØù
                    if (window.studyStats) {
                        window.studyStats.endStudySession();
                        console.log('üìä Â≠¶‰π†ÁªüËÆ°‰ºöËØùÂ∑≤ÁªìÊùü');
                    }
                    
                    // ËÆ°ÁÆóÊúÄÁªàÁªüËÆ°
                    this.practiceResults.accuracy = Math.round((this.practiceResults.correct / this.practiceResults.total) * 100);
                    this.practiceResults.timeUsed = (this.selectedQuestions.length * 180) - this.timeRemaining;
                    
                    // Êõ¥Êñ∞ÁªÉ‰π†‰ºöËØù
                    if (this.currentSessionId) {
                        try {
                            await fetch(`/api/practice/sessions/${this.currentSessionId}/complete`, {
                                method: 'PUT',
                                headers: {
                                    'Content-Type': 'application/json'
                                },
                                body: JSON.stringify({
                                    totalQuestions: this.practiceResults.total,
                                    correctCount: this.practiceResults.correct,
                                    wrongCount: this.practiceResults.wrong,
                                    timeSpent: this.practiceResults.timeUsed
                                })
                            });
                        } catch (error) {
                            console.error('Êõ¥Êñ∞ÁªÉ‰π†‰ºöËØùÂ§±Ë¥•:', error);
                        }
                    }
                    
                    // Êõ¥Êñ∞ÂÖ®Â±ÄÁªüËÆ°
                    this.totalCompleted += this.practiceResults.total;
                    
                    // Êõ¥Êñ∞ÁªÉ‰π†ÁªüËÆ°ÔºàÊ≠£Á°ÆÁéáËÆ°ÁÆóÔºâ
                    this.updatePracticeStats(this.practiceResults.correct, this.practiceResults.wrong);
                    
                    // ‰øùÂ≠òÂà∞localStorage
                    localStorage.setItem('totalCompleted', this.totalCompleted.toString());
                    
                    // ÈáçÊñ∞Âä†ËΩΩÁªÉ‰π†ÂéÜÂè≤
                    this.loadPracticeHistory();
                    
                    this.showResults = true;
                },
                
                exitPractice() {
                    if (confirm('Á°ÆÂÆöË¶ÅÈÄÄÂá∫ÁªÉ‰π†ÂêóÔºüÂΩìÂâçËøõÂ∫¶Â∞Ü‰∏ç‰ºö‰øùÂ≠ò„ÄÇ')) {
                        if (this.timer) clearInterval(this.timer);
                        this.currentQuestion = null;
                        this.selectedQuestions = [];
                    }
                },
                
                viewWrongQuestions() {
                    const wrongAnswers = this.practiceResults.answers.filter(a => !a.isCorrect);
                    if (wrongAnswers.length > 0) {
                        this.showToast(`ÂèëÁé∞ ${wrongAnswers.length} ÈÅìÈîôÈ¢òÔºåÂ∑≤Âä†ÂÖ•ÈîôÈ¢òÊú¨`, 'info');
                        // ËøôÈáåÂèØ‰ª•Ë∑≥ËΩ¨Âà∞ÈîôÈ¢òÊú¨È°µÈù¢
                    }
                    this.showResults = false;
                },
                
                getOptionClass(index) {
                    if (!this.showAnswer) {
                        return this.selectedAnswer === index ? 'option-selected border-indigo-500' : 'border-gray-200 hover:border-indigo-300';
                    } else {
                        if (index === this.currentQuestion.correctAnswer) {
                            return 'option-correct border-green-500';
                        } else if (index === this.selectedAnswer && index !== this.currentQuestion.correctAnswer) {
                            return 'option-wrong border-red-500';
                        } else {
                            return 'border-gray-200';
                        }
                    }
                },
                
                getOptionCircleClass(index) {
                    if (!this.showAnswer) {
                        return this.selectedAnswer === index ? 'border-white' : 'border-current';
                    } else {
                        if (index === this.currentQuestion.correctAnswer) {
                            return 'border-white';
                        } else if (index === this.selectedAnswer && index !== this.currentQuestion.correctAnswer) {
                            return 'border-white';
                        } else {
                            return 'border-current';
                        }
                    }
                },
                
                // ÁªÉ‰π†ËÆæÁΩÆÊñπÊ≥ï
                showPracticeSettings(subject) {
                    alert(`ÁªÉ‰π†ËÆæÁΩÆ\n\nÁßëÁõÆ: ${subject.name}\n\n‚Ä¢ È¢òÁõÆÊï∞Èáè: 1-50È¢ò\n‚Ä¢ ÈöæÂ∫¶ÈÄâÊã©: ÁÆÄÂçï/‰∏≠Á≠â/Âõ∞Èöæ\n‚Ä¢ Êó∂Èó¥ÈôêÂà∂: Ëá™ÂÆö‰πâ\n‚Ä¢ Á≠îÈ¢òÊ®°Âºè: ÁªÉ‰π†/Ê®°ÊãüËÄÉËØï\n\nÂäüËÉΩÂºÄÂèë‰∏≠...`);
                },
                
                // ÁßëÁõÆÁªüËÆ°ÊñπÊ≥ï
                showSubjectStats(subject) {
                    const stats = `ÁßëÁõÆÁªüËÆ°\n\n${subject.name}\n‚Ä¢ ÊÄªÈ¢òÊï∞: ${subject.totalQuestions}\n‚Ä¢ Â∑≤ÂÆåÊàê: ${subject.completed}\n‚Ä¢ ÂÆåÊàêÁéá: ${subject.totalQuestions > 0 ? Math.round((subject.completed / subject.totalQuestions) * 100) + '%' : '0%'}\n‚Ä¢ Ê≠£Á°ÆÁéá: ËÆ°ÁÆó‰∏≠...\n\nËØ¶ÁªÜÁªüËÆ°ÂäüËÉΩÂºÄÂèë‰∏≠...`;
                    alert(stats);
                },
                
                // Âπ¥‰ªΩÁõ∏ÂÖ≥ÊñπÊ≥ï
                getYearRange() {
                    if (this.years.length === 0) return { earliest: 0, latest: 0 };
                    const yearValues = this.years.map(y => y.year);
                    return {
                        earliest: Math.min(...yearValues),
                        latest: Math.max(...yearValues)
                    };
                },
                
                getTotalYearQuestions() {
                    return this.years.reduce((total, year) => total + year.questions, 0);
                },
                
                getCompletedYears() {
                    return this.years.filter(year => year.completed === year.questions);
                },
                
                getYearProgress(year) {
                    if (year.questions === 0) return 0;
                    return Math.round((year.completed / year.questions) * 100);
                },
                
                getYearCardStyle(year) {
                    const progress = this.getYearProgress(year);
                    if (progress === 100) return 'ring-2 ring-green-200 bg-green-50';
                    if (progress > 50) return 'ring-2 ring-blue-200 bg-blue-50';
                    if (progress > 0) return 'ring-2 ring-yellow-200 bg-yellow-50';
                    return 'hover:ring-2 hover:ring-gray-200';
                },
                
                getYearGradient(year) {
                    const progress = this.getYearProgress(year);
                    if (progress === 100) return 'background: linear-gradient(135deg, #10b981 0%, #059669 100%)';
                    if (progress > 50) return 'background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)';
                    if (progress > 0) return 'background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%)';
                    return 'background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%)';
                },
                
                getProgressBarColor(year) {
                    const progress = this.getYearProgress(year);
                    if (progress === 100) return 'bg-green-500';
                    if (progress > 50) return 'bg-blue-500';
                    if (progress > 0) return 'bg-yellow-500';
                    return 'bg-gray-300';
                },
                
                getYearStatusColor(year) {
                    const progress = this.getYearProgress(year);
                    if (progress === 100) return 'text-green-600';
                    if (progress > 50) return 'text-blue-600';
                    if (progress > 0) return 'text-yellow-600';
                    return 'text-gray-500';
                },
                
                getYearStatusText(year) {
                    const progress = this.getYearProgress(year);
                    if (progress === 100) return 'Â∑≤ÂÆåÊàê';
                    if (progress > 50) return 'ËøõË°å‰∏≠';
                    if (progress > 0) return 'Â∑≤ÂºÄÂßã';
                    return 'Êú™ÂºÄÂßã';
                },
                
                // Âø´ÈÄüÁªÉ‰π†ÊñπÊ≥ï
                startRecentYearsPractice() {
                    const recentYears = this.years.filter(y => y.year >= 2022);
                    const questions = this.sampleQuestions.filter(q => q.year >= 2022);
                    if (questions.length === 0) {
                        this.showToast('ËøëÂπ¥ÁúüÈ¢òÊ≠£Âú®Êï¥ÁêÜ‰∏≠...', 'info');
                        return;
                    }
                    this.startPractice(questions, 'year', { yearRange: '2022-2024' });
                },
                
                startRandomYearPractice() {
                    const availableYears = this.years.filter(y => y.questions > 0);
                    if (availableYears.length === 0) {
                        this.showToast('ÊöÇÊó†ÂèØÁî®Âπ¥‰ªΩÈ¢òÁõÆ', 'info');
                        return;
                    }
                    const randomYear = availableYears[Math.floor(Math.random() * availableYears.length)];
                    this.startYearPractice(randomYear.year);
                },
                
                startIncompleteYearsPractice() {
                    const incompleteYears = this.years.filter(y => y.completed < y.questions && y.questions > 0);
                    if (incompleteYears.length === 0) {
                        this.showToast('ÊâÄÊúâÂπ¥‰ªΩÈÉΩÂ∑≤ÂÆåÊàêÔºÅ', 'success');
                        return;
                    }
                    const allIncompleteQuestions = [];
                    incompleteYears.forEach(year => {
                        const yearQuestions = this.sampleQuestions.filter(q => q.year === year.year);
                        allIncompleteQuestions.push(...yearQuestions);
                    });
                    this.startPractice(allIncompleteQuestions, 'year', { type: 'incomplete' });
                },
                
                showYearStats(year) {
                    const stats = `${year.year}Âπ¥ÁúüÈ¢òÁªüËÆ°\n\n‚Ä¢ È¢òÁõÆÊÄªÊï∞: ${year.questions}ÈÅì\n‚Ä¢ Â∑≤ÂÆåÊàê: ${year.completed}ÈÅì\n‚Ä¢ ÂÆåÊàêÁéá: ${this.getYearProgress(year)}%\n‚Ä¢ Áä∂ÊÄÅ: ${this.getYearStatusText(year)}\n\nËØ¶ÁªÜÁªüËÆ°ÂäüËÉΩÂºÄÂèë‰∏≠...`;
                    alert(stats);
                },
                
                resetYearProgress(year) {
                    if (confirm(`Á°ÆÂÆöË¶ÅÈáçÁΩÆ${year.year}Âπ¥ÁöÑÁªÉ‰π†ËøõÂ∫¶ÂêóÔºü`)) {
                        year.completed = 0;
                        this.showToast(`${year.year}Âπ¥ÁªÉ‰π†ËøõÂ∫¶Â∑≤ÈáçÁΩÆ`, 'success');
                    }
                },
                
                showToast(message, type = 'info') {
                    const toast = document.createElement('div');
                    toast.className = `fixed top-4 right-4 px-6 py-3 rounded-lg text-white z-50 transition-all duration-300 ${
                        type === 'success' ? 'bg-green-500' : 
                        type === 'error' ? 'bg-red-500' : 'bg-blue-500'
                    }`;
                    toast.textContent = message;
                    document.body.appendChild(toast);
                    
                    setTimeout(() => {
                        toast.style.opacity = '0';
                        setTimeout(() => toast.remove(), 300);
                    }, 3000);
                },

                // ÊòæÁ§∫ËØ¶ÁªÜÁªüËÆ°
                showDetailedStats() {
                    const practiceStats = localStorage.getItem('practiceStats');
                    const detailsContainer = document.getElementById('detailed-stats');
                    
                    if (practiceStats) {
                        try {
                            const stats = JSON.parse(practiceStats);
                            detailsContainer.innerHTML = `
                                <div class="flex justify-between">
                                    <span class="text-gray-600">ÊÄªÁ≠îÈ¢òÊï∞:</span>
                                    <span class="font-medium">${stats.totalAnswered || 0}</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">ÊÄªÁ≠îÂØπÊï∞:</span>
                                    <span class="font-medium text-green-600">${stats.totalCorrect || 0}</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">ÊÄªÁ≠îÈîôÊï∞:</span>
                                    <span class="font-medium text-red-600">${(stats.totalAnswered || 0) - (stats.totalCorrect || 0)}</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Êï∞ÊçÆÊõ¥Êñ∞Êó∂Èó¥:</span>
                                    <span class="font-medium text-xs">${new Date().toLocaleString()}</span>
                                </div>
                            `;
                        } catch (error) {
                            detailsContainer.innerHTML = '<p class="text-red-600">Êï∞ÊçÆËß£ÊûêÂ§±Ë¥•</p>';
                        }
                    } else {
                        detailsContainer.innerHTML = '<p class="text-gray-500">ÊöÇÊó†ÁªüËÆ°Êï∞ÊçÆ</p>';
                    }
                },

                // ÈáçÁΩÆÁªüËÆ°Êï∞ÊçÆ
                resetStats() {
                    if (confirm('Á°ÆÂÆöË¶ÅÈáçÁΩÆÊâÄÊúâÁªüËÆ°Êï∞ÊçÆÂêóÔºüÊ≠§Êìç‰Ωú‰∏çÂèØÊÅ¢Â§çÔºÅ')) {
                        localStorage.removeItem('practiceStats');
                        localStorage.removeItem('dailyStats');
                        localStorage.removeItem('totalCompleted');
                        
                        // ÈáçÊñ∞ÂàùÂßãÂåñÊï∞ÊçÆ
                        this.totalCompleted = 0;
                        this.accuracyRate = 0;
                        this.dailyCompleted = 0;
                        
                        this.showStatsModal = false;
                        this.showToast('ÁªüËÆ°Êï∞ÊçÆÂ∑≤ÈáçÁΩÆ', 'success');
                    }
                }
            };
        }
    </script>
    
    <!-- Á¨îËÆ∞ÁÆ°ÁêÜÂô® -->
    <script src="assets/js/notes-manager.js"></script>
    <!-- Á´†ËäÇÈÄâÊã©Âô® -->
    <script src="assets/js/chapter-selector.js"></script>
    
    <!-- Âø´Êç∑ÂØºËà™Ê†è -->
    <script src="assets/js/quick-nav.js"></script>
</body>
</html>